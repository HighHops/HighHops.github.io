window['__jsonp_ym_combine_535556575859$y9q$x9j$V9I$D$W9;9i$X$T5(9z5$5D9Q$S$U5.5M5K5P5m5-,f4Q5u5L5t5w4z4I5;5:5r5v5T5a5p5S'](
[
['53', function (ym) {
ym.modules.define("graphics.render.svg.tech",["util.defineClass","graphics.render.base.tech","graphics.render.svg.pane"],function(e,n,r,s){function c(){c.superclass.constructor.call(this)}n(c,r,{createPane:function(){return new s}}),e(new c)});}],
['55', function (ym) {
ym.modules.define("graphics.renderManager.canvasTile",["util.dom.element","util.dom.style","util.pixelBounds","graphics.renderManager.constants","graphics.renderManager.functions"],function(e,a,n,t,r,i){function d(e,a,n,t){if(e.length!=a.length)return!0;for(var r=0,i=e.length;r<i;++r)if(n[e[r]].id!=t[a[r]].id)return!0;return!1}function o(e,a,n){for(var t=0,r="x"+a,i=e;t<u&&n[i+r];++i)t++;return t}function s(e,a,n){for(var t=1e3,r=0,i=[0,0],d=a,s=0;s<u;++d,++s){var l=o(e,d,n);if(0==l)break;var g=Math.min(l-1,t),f=g+s;r<f&&(i=[g,s],r=f),t=g}return i}function l(e){var a,n,t,r,i,d,o,l=[],g={};for(a=0,n=e.length;a<n;++a)g[e[a][0]]=e[a];for(a=0,n=e.length;a<n;++a){var f=e[a];if(g[f[0]]){var h=s(f[1],f[2],g),p=[];for(t=f[1],i=f[1]+h[0];t<=i;++t)for(r=f[2],d=f[2]+h[1];r<=d;++r)o=t+"x"+r,p.push(g[o]),g[o]=!1;l.push({dimension:h,items:p})}}return l}function g(e,a,n,t,r){e.drawImage(a,r*(n[0]-t[0]),r*(n[1]-t[1]))}var f,h={element:a,style:n},p=r.tileSize,u=r.renderLineLimit,c=null,m={place:function(e,a){return e.data=e.data||{},this.process(e,a),e.data=e.newData,e.data.items=e.items,e.data.element},renderGroup:function(e,a){var n,t,r,i=a.items,d=i[0],o=[[d[1]*p,d[2]*p],[(d[1]+a.dimension[0]+1)*p,(d[2]+a.dimension[1]+1)*p]],s=f,l=a.items.length;1==l&&(s=e.newData.grid[d[0]].pane);var h=[];for(r=0;r<l;++r)h=h.concat(e.newData.grid[i[r][0]].items||[]);if(c=e.items,h.sort(this._itemsSort),c=null,s=this.fillTilePane(e,h,s),s.updateClipping(o,!1,0),l>1?s.lockBoundsTo(o):s.lockBoundsTo(null),s.flush(),s.removeAll(),n=s.holder(),s.margin){var u=[s.margin.left,s.margin.top],m=s.clippingOffset,D=[u[0]+m[0],u[1]+m[1]];if(1==l)e.newData.grid[d[0]].pane=s;else for(f=s,r=0;r<l;++r){var v=e.newData.grid[i[r][0]];t=v.pane=this.fillTilePane(e,v.items,v.pane),t.updateClipping([[i[r][1]*p,i[r][2]*p],[(i[r][1]+1)*p,(i[r][2]+1)*p]],!1,0),t.lockBoundsTo([[i[r][1]*p,i[r][2]*p],[(i[r][1]+1)*p,(i[r][2]+1)*p]]),t.resize(),t.removeAll(),t.prepareRender();var w=[t.margin.left,t.margin.top],M=t.clippingOffset,B=[w[0]+M[0],w[1]+M[1]],x=t.scaleFactor,P=t.getCanvas();g(P,n,D,B,x)}}},fillTilePane:function(e,a,n){for(var t=e.items,r=0,i=a.length;r<i;r++){var d=t[a[r]].shape.getGraphics();n||(n=d.createPane(),n.setPositionPolicy(!1,!0)),d.getPane()!=n&&n.addShape(d),t[a[r]].changed=0}return n},process:function(e,a){var n=a.getVisibleBounds(0),r=[[Math.floor(n[0][0]/p),Math.floor(n[0][1]/p)],[Math.floor(n[1][0]/p),Math.floor(n[1][1]/p)]];e.newData&&(t.containsBounds(e.newData.bounds,r)||(e.newData=0)),e.newData||(e.newData=this.createDataGrid(e.items,r),e.newData.element=e.data.element,e.newData.element||(e.newData.element=h.element.create()));var i,o,s,g,f,u=e.data.bounds,c=e.newData.bounds,m=0;if(e.data.grid)for(i=u[0][0];i<u[1][0];i++)for(o=u[0][1];o<u[1][1];o++)f=i+"x"+o,e.data.grid[f]&&(!e.newData.grid[f]&&e.data.grid[f].pane&&h.element.remove(e.data.grid[f].pane.holder()),e.newData.grid[f]&&(e.newData.grid[f].pane=e.data.grid[f].pane,e.newData.grid[f].changed+=e.data.grid[f].changed?1:0,d(e.data.grid[f].items,e.newData.grid[f].items,e.data.items,e.items)&&e.newData.grid[f].changed++));else e.data.grid={};var D=[],v=[];if(e.newData.grid){for(i=c[0][0];i<c[1][0];i++)for(o=c[0][1];o<c[1][1];o++)f=i+"x"+o,e.newData.grid[f]&&(i>=r[0][0]&&i<=r[1][0]&&o>=r[0][1]&&o<=r[1][1]?(D.push(f),e.data.grid[f]&&!e.newData.grid[f].changed&&e.newData.grid[f].pane||(v.push([f,i,o]),e.newData.grid[f].changed=0,e.newData.grid[f].updated=1)):e.newData.grid[f].pane&&h.element.remove(e.newData.grid[f].pane.holder()));var w=l(v);for(s=0,g=w.length;s<g;++s){var M=w[s];this.renderGroup(e,M),m++}for(s=0,g=D.length;s<g;++s){f=D[s];var B=e.newData.grid[f].pane;if(B.margin){var x=a.toClientPixels([B.margin.left,B.margin.top]),P=B.clippingOffset,T=B.holder();e.newData.grid[f].updated=0,h.style.setPosition(T,[x[0]+P[0],x[1]+P[1]]),T.parentNode!=e.newData.element&&e.newData.element.appendChild(T)}}}},createDataGrid:function(e,a){for(var n,r,i,d,o,s,l,g=[],f={},h=2,u=[[a[0][0]-h,a[0][1]-h],[a[1][0]+h,a[1][1]+h]],c=0,m=e.length;c<m;++c)if(n=e[c].shape.getGraphics().getBounds(),i=e[c]._canvas_lastBounds,r=t.getIntersection(u,[[Math.floor(n[0][0]/p),Math.floor(n[0][1]/p)],[Math.ceil(n[1][0]/p),Math.ceil(n[1][1]/p)]])){for(g.push(r),l=e[c].changed,e[c]._canvas_lastBounds=r,d=r[0][0];d<r[1][0];d++)for(o=r[0][1];o<r[1][1];o++)s=d+"x"+o,f[s]=f[s]||{items:[],changed:0},f[s].items.push(c),f[s].changed+=l;if(i)for(d=i[0][0];d<i[1][0];d++)for(o=i[0][1];o<i[1][1];o++)(d<r[0][0]||d>r[1][0]||o<r[0][1]||o>r[1][1])&&(s=d+"x"+o,f[s]&&(f[s].changed+=l))}var D=t.fromBounds(g),v=[D[1][0]-D[0][0],D[1][1]-D[0][1]];return{gridSize:v,bounds:D,grid:f}},_itemsSort:function(e,a){return-i.zIndexComparison(c[e].shape,c[a].shape)}};e(m)});}],
['56', function (ym) {
ym.modules.define("graphics.renderManager.constants",["system.browser","util.hd"],function(e,i,r){var i=ym.env.browser,n=i.isMobile||i.isTablet;if("MSIE"==i.name||"IEMobile"==i.name)return e({tileSize:256,renderLineLimit:1});var t=r.getPixelRatio(),a=t>1?256:320;e({tileSize:a,renderLineLimit:n?1:2})});}],
['57', function (ym) {
ym.modules.define("graphics.renderManager.functions",[],function(e){function r(e,r){if(!r||!e)return 0;var n=r,t=e;if(!n||!t)return 0;var d=n.getZIndex(),i=t.getZIndex();return d!=i?d-i:n.getZOrder()-t.getZOrder()}e({zIndexComparison:r})});}],
['58', function (ym) {
ym.modules.define("graphics.renderManager.NodePane",["util.dom.element","util.dom.style","graphics.renderManager.canvasTile","graphics.renderManager.functions","util.css"],function(e,t,s,n,i,a){function h(e,n){this._manager=n,this.element=t.create({parentNode:e,className:a.addPrefix("node-pane"),css:{position:"absolute",left:0,top:0,zIndex:0}}),s.patch(this.element,{selectable:!1}),this._commandsList=[],this._hasChangedOrder=0,this._clusters=[],this._items=[],this._counter=0}var d=-1,r=-2,o=-3,l=-4;h.prototype={add:function(e){this._commandsList.push([this._insert,e])},remove:function(e){this._commandsList.push([this._remove,e])},hide:function(e){this._commandsList.push([this._hide,e])},update:function(e){e.__nodePaneId&&(e.__nodePaneId.changed++,e.__nodePaneId.cluster&&e.__nodePaneId.cluster.changed++,this._hasChangedOrder++)},executeQueue:function(e,t){for(var s=0;s<this._commandsList.length;++s)this._commandsList[s][0].call(this,this._commandsList[s][1]);this._commandsList=[],this._hasChangedOrder&&(this._sortElements(),this._updateClusters(),this._hasChangedOrder=0),this._modifyNodes(e,t),this._removeUnused()},_sortElements:function(){this._items.sort(function(e,t){return i.zIndexComparison(e.shape,t.shape)})},_updateClusters:function(){var e,s,n,i,a="",h=[],r=[],o=null;for(e=0,n=this._items.length;e<n;e++){var l=this._items[e].shape,_=l.getTechName();if(this._items[e].index>=d){var c="canvas"==_;(_!=a||l.isDynamic&&c)&&(o&&o.items.length&&h.push(o),o={tech:_,special:c,items:[],changed:0,startZIndex:l.getZIndex()}),o.items.push(this._items[e]),this._items[e].cluster=o,o.changed+=this._items[e].changed,a=l.isDynamic&&c?"":_}else r.push(this._items[e])}for(o&&o.items.length&&h.push(o),e=0,n=this._clusters.length;e<n;e++){var u=!1;for(s=0,i=h.length;s<i;++s)if(this._clusters[e].tech==h[s].tech&&!h[s].used){h[s].data=this._clusters[e].data,h[s].used=!0,h[s].topNode=this._clusters[e].topNode,u=!0;break}u||(this._clusters[e].data&&this._clusters[e].data.element&&t.remove(this._clusters[e].data.element),this._clusters[e].topNode&&t.remove(this._clusters[e].topNode))}this._clusters=h,this._unusedItems=r},_insert:function(e){if(!e.__nodePaneId){var t={shape:e,id:this._counter++,index:-1,nodeId:this,changed:0,prevElement:null};this._items.push(t),e.__nodePaneId=t}e.__nodePaneId.index<d&&(e.__nodePaneId.index=d),e.__nodePaneId.changed++,this._hasChangedOrder++},_hide:function(e){e.__nodePaneId&&(e.__nodePaneId.index=r,e.__nodePaneId.prevElement=null)},_remove:function(e){e.__nodePaneId&&(this._hide(e),e.__nodePaneId.index=l),this._hasChangedOrder++},_placeNodes:function(e,t,s,n){for(var i=0,a=0,h=t.length;a<h;++a)if(t[a].index>=d){var r=t[a].shape;r.getPane()||r.attachToContainer();var o=r.getPane();o.setViewportSize(n),o.setPositionPolicy(!1,!0);var l=o.holder(),_=r.reposite(s);(t[a].changed||_)&&(o.flush(),t[a].changed=0);var c=l.parentNode==e;c||(t[a].index=d,t[a].prevElement=null),t[a].index==a&&c||(t[a].index=a,o.beforeAttach(l),i?i!=l.nextSibling&&(e.insertBefore(l,i),t[a].prevElement=i):(t[a].prevElement=null,e.appendChild(l)),o.afterAttach(l),o.changed(r),o.flush()),i=l}else this._removeShape(t[a]);return i},_placeSpecial:function(e,t){var s=null;if("canvas"!=t.tech)throw new Error("graphics.renderManager.NodePane: неизвесный тип "+t.tech);return s=n.place(t,this._manager),e.appendChild(s),s},_modifyNodes:function(e,n){for(var i=null,h=0,d=this._clusters.length;h<d;++h){var r=this._clusters[h],o=r.topNode;o&&o.nextSibling==i||(o||(o=r.topNode=t.create({className:a.addPrefix("graphics-"+r.tech)}),s.css(o,{position:"absolute",transform:"translateZ(0)",left:0,top:0})),i?this.element.insertBefore(o,i):this.element.firstChild?this.element.insertBefore(o,this.element.firstChild):this.element.appendChild(o)),s.css(o,{zIndex:r.startZIndex}),ym.env.debug&&s.attr(o,{itemsCount:r.items.length}),i=o,r.special&&r.items.length>0?this._placeSpecial(o,r):this._placeNodes(o,r.items,e,n)}},_removeUnused:function(){if(this._unusedItems)for(var e=0,t=this._unusedItems.length;e<t;++e)this._removeShape(this._unusedItems[e]);this._unusedItems=null},_removeShape:function(e){var t=e.index;if(t<=r&&e.shape){var s=e.shape,n=s.getPane(),i=n?n.holder():null;i&&i.parentNode&&i.parentNode.removeChild(i),e.index=o}t==l&&this._unlinkShape(e)},_unlinkShape:function(e){var t=e.shape;t&&t.__nodePaneId&&(t.__nodePaneId.shape=null,t.__nodePaneId.nodeId=null,t.__nodePaneId.prevElement=null,t.__nodePaneId.cluster=null,t.__nodePaneId=null);for(var s=0,n=this._items.length;s<n;++s)if(this._items[s]===e){this._items.splice(s,1);break}},destroy:function(){for(var e=this._items.length-1;e>=0;--e)this.remove(this._items[e].shape);t.remove(this.element)}},e(h)});}],
['59', function (ym) {
ym.modules.define("graphics.renderManager.pane",["util.defineClass","graphics.renderManager.ShapeStorage","util.scheduler.Group","graphics.renderManager.constants","event.Manager","yandex.counter","graphics.component.PerformanceMeasurer","graphics.renderManager.NodePane","graphics.frameTypes"],function(e,t,s,i,n,h,r,a,d,o){function u(e){this._map=e.getMap(),this._pane=e,this.events=new h({context:this}),this._mapEvents=this._map.events.group().add("destroy",this._onMapDestroy,this),this._paneEvents=this._pane.events.group().add("viewportchange",this._scheduleRender.bind(this,o.FAST)).add("actionend",this._scheduleRender.bind(this,o.SLOW)).add("rendertick",this._render.bind(this,o.FAST)),this._nodePane=new d(this._pane.getElement(),this),this._storage=new s(this._nodePane,{onShapeUpdate:this._onShapeUpdate.bind(this)}),this._scheduledCommands=[],this._scheduledFrameType=o.NONE,this._scheduler=new i,this._measurer=new a({report:function(e,t){r.countByKey("modulesUsage","graphics.render.time."+t.getTrackName(this._getViewportSize())+"."+e.value)},reportContext:this})}t(u,{add:function(e){this._scheduledCommands.push(["add",e]),this._scheduleRender(o.SLOW)},remove:function(e){this._scheduledCommands.push(["remove",e]),this._scheduleRender(o.SLOW)},_onShapeUpdate:function(e){this._scheduledCommands.push(["update",e]),this._scheduleRender(o.SLOW)},_scheduleRender:function(e){!this._map||this._inRender||this._scheduledFrameType||this._scheduler.schedule("raf",this._render,this),this._scheduledFrameType=Math.max(this._scheduledFrameType,e)},_render:function(e){this._measurer.measure(),this._scheduler.unschedule("raf",this._render,this);var t=Math.max(this._scheduledFrameType,null==e?o.NONE:e);if(this._scheduledFrameType=o.NONE,t!==o.NONE&&this._map){this._inRender=!0;for(var s=0;s<this._scheduledCommands.length;++s)this._storage[this._scheduledCommands[s][0]](this._scheduledCommands[s][1]);this._scheduledCommands=[],this._storage.peformViewportCulling(this.getVisibleBounds());var i=this._getViewportSize();if(this._nodePane.executeQueue(t,{width:i[0],height:i[1]}),this._inRender=!1,this._scheduledFrameType){var n=this._scheduledFrameType;this._scheduledFrameType=o.NONE,this._scheduleRender(n)}}},_getViewportSize:function(){var e=this._pane.getViewport();return[e[1][0]-e[0][0],e[1][1]-e[0][1],1]},toClientPixels:function(e){return this._pane.toClientPixels(e)},getVisibleBounds:function(e){e=e||this._map.options.get("canvasViewportMargin")||n.tileSize/2;var t=this._pane.getViewport();return this._map.action.getCurrentState().isTicking&&(e=-1),[this._pane.fromClientPixels([t[0][0]-e,t[0][1]-e]),this._pane.fromClientPixels([t[1][0]+e,t[1][1]+e])]},getZoom:function(){return this._pane.getZoom()},getElement:function(){return this._pane.getElement()},_onMapDestroy:function(){this._map=null,this._pane=null,this._scheduler.removeAll(),this._paneEvents.removeAll(),this._mapEvents.removeAll(),this._measurer.destroy()}}),e(u)});}],
['$y', function (ym) {
ym.modules.define({name:"overlay.Placemark",key:"default#placemark",storage:"overlay",depends:["util.defineClass","overlay.BaseWithShadow","overlay.placemark.AvailableViews","canvasLayout.storage","util.css","theme.islands.geoObject.meta.full"],declaration:function(e,t,a,n,o,s){function i(e,t,a){i.superclass.constructor.call(this,e,t,a),this.options.setName("overlay.Placemark"),this._viewRenderMode="",this._shadowViewRenderMode=""}function r(){this.getView().setLayoutParameters({disableDomEventListening:this.isUnderEventsPane()||!this.isInteractive()})}i.WrongRenderMode=function(){return new Error("Wrong value of renderMode option")},i.supportedOverlayMovablePanes={places:"places-smooth",shadows:"shadows-smooth"},t(i,a,{getIconLayout:function(){return this.getLayout()},getIconLayoutSync:function(){return this.getLayoutSync()},getIconElement:function(){return this.getElement()},applyGeometryToView:function(e,t){e.setPosition(this.geometryToViewPosition(t))},getDefaultPane:function(){return"places"},resolvePaneKey:function(e,t){return"dom"==this._viewRenderMode&&("dom"==this._shadowViewRenderMode||""==this._shadowViewRenderMode)&&this.constructor.supportedOverlayMovablePanes&&t&&(e=this.constructor.supportedOverlayMovablePanes[e]||e),e},geometryToViewPosition:function(e){return e.getCoordinates()},bindOptions:function(e){i.superclass.bindOptions.call(this,e),e.add(["renderMode","layout","shadowLayout"],this._onRenderModeChange,this,{defaultValues:{renderMode:"auto"}}),this._viewRenderMode=this._getRenderMode("layout"),this._shadowViewRenderMode=this._getRenderMode("shadowLayout")},getViewCallbacks:function(){return{onLayoutChange:{callback:this._layoutChangeCallback,context:this}}},getViewClass:function(){return this._getViewClass(this._viewRenderMode)},getViewParams:function(){return{layout:{defaultValue:"islands#icon"},element:{className:s.addPrefix("placemark-overlay"),patch:{selectable:!1}},eventMapper:this.getEventMapper(),layoutParameters:{disableDomEventListening:this.isUnderEventsPane()||!this.isInteractive()}}},onUnderEventsPaneChange:r,onInteractiveChange:r,getShadowViewCallbacks:function(){return{onLayoutChange:{callback:this._shadowLayoutChangeCallback,context:this}}},getShadowViewClass:function(){return this._getViewClass(this._shadowViewRenderMode)},getShadowViewParams:function(){return{element:{className:s.addPrefix("html-placemark-shadow"),patch:{selectable:!1}},layoutParameters:{disableDomEventListening:!0}}},_onRenderModeChange:function(){var e=this._getRenderMode("layout"),t=this._getRenderMode("shadowLayout");this._viewRenderMode==e&&this._shadowViewRenderMode==t||(this._viewRenderMode=e,this._shadowViewRenderMode=t,this.removeFromMap(),this.addToMap(),this.updateShape())},_layoutChangeCallback:function(){this.events.fire("layoutchange")},_shadowLayoutChangeCallback:function(){this.events.fire("shadowlayoutchange")},_getViewClass:function(e){return"canvas"==e?n.Graphics:"dom"==e?n.Dom:void(ym.env.debug&&i.WrongRenderMode())},_getRenderMode:function(e){var t=this.monitor.get("renderMode");if("auto"==t||"canvas"==t)if(n.Graphics){var a=this.monitor.get(e),s=typeof a;t="function"==s||"undefined"==s?"dom":"string"==s?o.isDefined(a)?"canvas":"dom":a.canvasLayout&&o.isDefined(a.canvasLayout)?"canvas":"dom"}else t="dom";return t}}),e(i)}});}],
['9q', function (ym) {
ym.modules.define("overlay.BaseWithShadow",["util.defineClass","overlay.BaseWithView","overlay.view.Dom","overlay.PaneController","option.Manager","option.Mapper","overlay.optionMapper","map.pane.helper.shadows","vow","util.extend"],function(e,t,o,a,s,i,n,h,w,d,r){function l(e,t,o){l.superclass.constructor.call(this,e,t,o),this._shadowView=null}l.WasNotAddedToMap=function(){return new Error("Overlay wasn't added to map")},t(l,o,{bindOptions:function(e){l.superclass.bindOptions.call(this,e),e.add("shadow",this._onShadowChange,this)},addToMap:function(){l.superclass.addToMap.call(this),this.monitor.get("shadow")&&(this.monitor.add("shadowsPane",this._onShadowPaneChange,this,{defaultValue:this.getDefaultShadowPane()}),this._shadowPaneController=new s(this.resolvePane(this.monitor.get("shadowsPane")),{onZoomChange:this.onShadowPaneZoomChange,onClientPixelsChange:this.onShadowPaneClientPixelsChange},this),this._setupShadowView())},removeFromMap:function(e){this.monitor.get("shadow")&&(this._clearShadowView(),this._shadowPaneController.destroy(),this.monitor.remove("shadowsPane")),l.superclass.removeFromMap.call(this,e)},getShadowPane:function(){var e=this.monitor.get("shadowsPane");return e?this.resolvePane(e):null},applyGeometry:function(){l.superclass.applyGeometry.call(this),this._shadowView&&this.applyGeometryToView(this._shadowView,this.getOffsetGeometry(this.getGeometry()))},getShadowLayout:function(){return this._shadowView?this._shadowView.getLayout():d.reject(l.WasNotAddedToMap())},getShadowLayoutSync:function(){return this._shadowView&&this._shadowView.getLayoutSync()},getShadowElement:function(){return this._shadowView&&this._shadowView.getElement()},getDefaultShadowPane:function(){return"shadows"},onShadowPaneClientPixelsChange:function(){this.applyGeometryToView(this._shadowView,this.getOffsetGeometry(this.getGeometry()))},onShadowPaneZoomChange:function(e){var t=this.getGeometry();e&&(t=t.scale(Math.pow(2,e))),this.applyGeometryToView(this._shadowView,this.getOffsetGeometry(t))},_setupShadowView:function(){this._shadowView=this.createShadowView()},getShadowView:function(){return this._shadowView},createShadowView:function(){var e={position:this.geometryToViewPosition(this.getOffsetGeometry(this.getGeometry())),data:this.getData(),options:new i({},this.options,"shadow"),pane:this.resolvePane(this.monitor.get("shadowsPane")),zIndex:this.monitor.get("zIndex")},t=this.getShadowViewClass();return new t(r(e,this.getShadowViewParams()),this.getShadowViewCallbacks())},_clearShadowView:function(){this.destroyShadowView(),this._shadowView=null},destroyShadowView:function(){this._shadowView.destroy()},_onShadowPaneChange:function(e){this._shadowView.setPane(e),this._shadowPaneController.setPane(e)},_onShadowChange:function(e){e?this._setupShadowView():this._clearShadowView()},onZIndexChange:function(e){l.superclass.onZIndexChange.call(this,e),this._shadowView&&this._shadowView.setZIndex(e)}}),h.setRule({name:"shadow",rule:"prefixed"}),h.setRule({name:"shadow",key:["offset"],rule:function(e){return n.addOptionalPrefix(e,"shadow")}}),h.setRule({name:"shadow",key:["projection"],rule:"plain"}),e(l)});}],
['$x', function (ym) {
ym.modules.define("overlay.placemark.AvailableViews",function(a){var s=["layout.svgIcon.canvasFactory","overlay.view.Dom"];return a.supports.graphics.hasCanvas()&&s.push("overlay.view.Graphics"),s},function(a,s,o,r){a({Dom:o,Graphics:s.hasCanvasSupport()?r:null})});}],
['9j', function (ym) {
ym.modules.define("overlay.BaseWithView",["util.defineClass","overlay.Base","overlay.component.DomCursorController","overlay.view.Hotspot","vow","util.extend"],function(e,t,n,i,s,o,a){function r(e,t,n){r.superclass.constructor.call(this,e,t,n),this._view=null,this._hotspotView=null,this._cursorController=null,this._underEventsPaneFlag=null,this._scaledGeometry=null}r.WasNotAddedToMap=function(){return new Error("Overlay wasn't added to map")},t(r,n,{bindOptions:function(e){r.superclass.bindOptions.call(this,e),e.add("eventsPane",this.onEventsPaneChange,this,{defaultValue:this.getDefaultEventPane()}).add("interactive",this.onInteractiveChange,this,{defaultValue:!0})},getDefaultEventPane:function(){return"events"},getEventPane:function(){var e=this.monitor.get("eventsPane");return e?this.resolvePane(e):null},addToMap:function(){this._setupView(),this._setupInteractiveView(),this.getMap().container.events.add("sizechange",this._onMapSizeChange,this)},removeFromMap:function(){this.getMap().container.events.remove("sizechange",this._onMapSizeChange,this),this._clearInteractiveView(),this._clearView()},monitorInteractiveOption:function(){return!0},applyGeometry:function(){this.applyGeometryToView(this._view,this.getOffsetGeometry(this.getGeometry()))},applyData:function(){this._view.setData(this.getData())},createShape:function(){var e=this._view?this._view.getShape():null;return e?e.shift(this.geometryToViewPosition(this.getOffsetGeometry(this.getGeometry()))):null},applyShape:function(){this.isUnderEventsPane()&&this._hotspotView.setShape(this.getShape())},getLayout:function(){return this._view?this._view.getLayout():o.reject(r.WasNotAddedToMap())},getLayoutSync:function(){return this._view?this._view.getLayoutSync():null},getElement:function(){return this._view?this._view.getElement():null},onZIndexChange:function(e){this._view.setZIndex(e),this.isUnderEventsPane()&&this._hotspotView.setZIndex(e)},isEmpty:function(){var e=this._view||this.createView(),t=e.isEmpty();return e!=this._view&&e.destroy(),t},isUnderEventsPane:function(){if(null===this._underEventsPaneFlag){var e=this.monitor.get("eventsPane");this._underEventsPaneFlag=!!e&&this.getMap().panes.getUpper(this.monitor.get("pane"),e)==e}return this._underEventsPaneFlag},isInteractive:function(){return this.monitor.get("interactive")},_setupView:function(){this._view=this.createView()},getView:function(){return this._view},createView:function(){var e=this.resolvePane(this.monitor.get("pane")),t={position:this.geometryToViewPosition(this.getOffsetGeometry(this.getGeometry())),data:this.getData(),options:this.options,pane:e,zIndex:this.monitor.get("zIndex"),prepareForGeometryTransitions:e.constructor&&e.constructor.firesClientPixelsTransition},n={onShapeChange:{callback:this.updateShape,context:this},onEmptinessChange:{callback:this._emptinessChangeCallback,context:this}},i=this.getViewClass();return new i(a(t,this.getViewParams()),a(n,this.getViewCallbacks()))},_clearView:function(){this.destroyView(this._view),this._view=null},destroyView:function(e){e.destroy()},_setupInteractiveView:function(){this.isUnderEventsPane()?this._setupHotspotView():this._setupCursorController()},_clearInteractiveView:function(){this.isUnderEventsPane()?this._clearHotspotView():this._clearCursorController()},_setupHotspotView:function(){this._hotspotView=new s({shape:this.getShape(),options:this.options,eventMapper:this.getEventMapper(),containerPane:this.resolvePane(this.monitor.get("pane")),pane:this.resolvePane(this.monitor.get("eventsPane")),zIndex:this.monitor.get("zIndex"),monitorInteractiveOption:!0})},_clearHotspotView:function(){this._hotspotView.destroy()},_emptinessChangeCallback:function(e){this.events.fire("emptinesschange",{oldEmptiness:e})},onPaneClientPixelsChange:function(){this.applyGeometryToView(this._view,this.getOffsetGeometry(this.getGeometry())),this.isUnderEventsPane()},onPaneZoomChange:function(e){var t=this.getGeometry();e&&(t=t.scale(Math.pow(2,e))),this._scaledGeometry=this.getOffsetGeometry(t),this.applyGeometryToView(this._view,this._scaledGeometry),this.isUnderEventsPane()&&this._hotspotView.setShape(this.calculateScaledShape(e))},onPaneClientPixelsTransition:function(){this._view&&this._view.updateClientPixelsTranstion()},calculateScaledShape:function(){var e=this._view?this._view.getShape():null;return e?e.shift(this.geometryToViewPosition(this._scaledGeometry)):null},_updateInteractiveView:function(e){this.isUnderEventsPane()?e?(this._hotspotView.setContainerPane(this.resolvePane(this.monitor.get("pane"))),this._hotspotView.setPane(this.resolvePane(this.monitor.get("eventsPane")))):(this._clearCursorController(),this._setupHotspotView()):e&&(this._clearHotspotView(),this._setupCursorController())},_setupCursorController:function(){this._view.getElement&&this._view.getElement()&&(this._cursorController=new i(this.monitor,this._view.getElement()))},_clearCursorController:function(){this._cursorController&&(this._cursorController.destroy(),this._cursorController=null)},onPaneChange:function(e){this._view.setPane(this.resolvePane(e)),r.superclass.onPaneChange.call(this,e),this._updateInteractiveView(this._resetUnderEventsPaneFlag())},onEventsPaneChange:function(){this._updateInteractiveView(this._resetUnderEventsPaneFlag())},_resetUnderEventsPaneFlag:function(){var e=this._underEventsPaneFlag;return this._underEventsPaneFlag=null,this.onUnderEventsPaneChange(e),e},onUnderEventsPaneChange:function(){},onInteractiveChange:function(){},_onMapSizeChange:function(e){var t=e.get("oldSize");!this._view||0!=t[0]&&0!=t[1]||this._view.updateShape()}}),e(r)});}],
['$V', function (ym) {
ym.modules.define("overlay.view.Dom",["util.defineClass","overlay.view.BaseWithLayout","util.extend","util.dom.element","util.dom.style","system.browser"],function(t,e,i,s,n,o,a){function r(t,e){this._eventMapper=t.eventMapper,this._lastPosition=[],r.superclass.constructor.call(this,t,e)}var l=Boolean(ym.supports.css.checkProperty("transform")),h=36e3;e(r,i,{bindOptions:function(t){r.superclass.bindOptions.call(this,t),t.add(["pixelPerfect"],this._resetPosition,this,{defaultValues:{pixelPerfect:!0}}),t.add(["rotation"],this._onRotation,this,{defaultValues:{rotation:0}})},getElement:function(){return this._element},createLayoutContainer:function(t){this._element=n.create(this._fixElementParams(t.element||{},t.prepareForGeometryTransitions))},updateClientPixelsTranstion:function(){var t=this.getPane().getClientPixelsTransition(this.getPosition());this._shouldUseTransformForPositioning()&&(t=[this._lastPosition[0]+t[0],this._lastPosition[1]+t[1]]),o.patch(this._element,{transform:{offset:t}})},applyZIndex:function(){o.css(this._element,{zIndex:this._fixZIndex(this.getZIndex())})},_fixZIndex:function(t){return t},_fixElementParams:function(t,e){return t.css=s({position:"absolute",width:0,height:0,zIndex:this._fixZIndex(this.getZIndex())},t.css),e&&(t.css.willChange="transform",t.css.transform="translateZ(0)"),"iOS"==a.osFamily&&(t.patch=s({transform:{use3D:!0}},t.patch)),t},_shouldUseTransformForPositioning:function(){return!this.monitor.get("pixelPerfect")&&l},setupPane:function(){r.superclass.setupPane.call(this),this.getPane().getElement().appendChild(this._element)},clearPane:function(){r.superclass.clearPane.call(this),n.remove(this._element)},getLayoutName:function(){return"domLayout"},createLayout:function(t){var e=new t(this.getLayoutData(),this.getLayoutParameters());return e.setParentElement(this._element),this._eventMapper&&e.events.setParent(this._eventMapper),e},destroyLayout:function(t){this._eventMapper&&t.events.setParent(null),t.setParentElement(null),t.destroy()},_resetPosition:function(){return o.setPosition(this._element,[0,0]),o.patch(this._element,{transform:{offset:[0,0]}}),this._applyPosition(!0)},_onRotation:function(){this._shouldUseTransformForPositioning()&&this._applyPosition(!1)},_applyPosition:function(t){var e=this.getPane().toClientPixels(this.getPosition());if(t||this._lastPosition[0]!=e[0]||this._lastPosition[1]!=e[1])if(this._lastPosition=e.slice(),this._shouldUseTransformForPositioning()){var i=this.monitor.get("rotation");if(this.getPane().getClientPixelsTransition){var s=this.getPane().getClientPixelsTransition(this.getPosition());e[0]+=s[0],e[1]+=s[1]}o.patch(this._element,{transform:{offset:e,rotate:i?Math.round(i*h)/h+"deg":i}})}else o.setPosition(this._element,e)},applyPosition:function(){this._applyPosition(!1)}}),t(r)});}],
['9I', function (ym) {
ym.modules.define("overlay.PaneController",["util.defineClass"],function(n,t){function e(n,t,e){this._pane=n,this._callbacks=t,this._context=e,this._lastPaneZoom=-1,this._setupPane()}t(e,{setPane:function(n){this._clearPane(),this._pane=n,this._setupPane()},getPane:function(){return this._pane},destroy:function(){this._clearPane()},_setupPane:function(){this._pane&&(this._lastPaneZoom=this._pane.getZoom(),this._pane.events.add("clientpixelschange",this._onClientPixelsChange,this),this._pane.events.add("clientpixelstransition",this._onClientPixelsTransition,this))},_clearPane:function(){this._pane&&(this._pane.events.remove("clientpixelstransition",this._onClientPixelsTransition,this),this._pane.events.remove("clientpixelschange",this._onClientPixelsChange,this),this._lastPaneZoom=-1)},_onClientPixelsTransition:function(){this._callbacks.onClientPixelsTransition.call(this._context)},_onClientPixelsChange:function(){var n=this._pane.getZoom();n!=this._lastPaneZoom?(this._lastPaneZoom=n,this._callbacks.onZoomChange.call(this._context,n-this._pane.getMap().getZoom())):this._callbacks.onClientPixelsChange.call(this._context)}}),n(e)});}],
['$D', function (ym) {
ym.modules.define("overlay.optionMapper",["option.Mapper"],function(e,o){e(new o)});}],
['$W', function (ym) {
ym.modules.define("overlay.view.Graphics",["util.defineClass","overlay.view.BaseWithLayout","util.extend","util.dom.element","util.dom.style","system.browser","graphics.shape.Layout","overlay.component.globalOrderCounter","graphics.renderManager","geometry.pixel.Rectangle","graphics.render.canvas.shape.Layout"],function(t,e,a,n,i,o,s,r,h,p,u){function c(t,e){this._globalCounter=h(),this._renderLayoutCallback=this._renderLayout.bind(this),c.superclass.constructor.call(this,t,e)}e(c,a,{bindOptions:function(t){c.superclass.bindOptions.call(this,t),t.add(["opacity","separateContainer","pixelPerfect","rotation"],this._updateRenderOptions,this,{opacity:!1,separateContainer:!1,pixelPerfect:!0,rotation:0})},createLayoutContainer:function(){this._graphicsShape=new r(this._calculateShapeGeometry()),this._graphicsShape.setRenderOptions(this._getRenderOptions())},applyZIndex:function(){this._updateRenderOptions()},_updateRenderOptions:function(){this._graphicsShape.setRenderOptions(this._getRenderOptions())},_getRenderOptions:function(){var t=this.getLayoutSync();return{opacity:this.monitor.get("opacity"),zIndex:this.getZIndex(),zOrder:this._globalCounter,rotation:this.monitor.get("rotation")||0,offset:t&&t.getOffset&&t.getOffset()||[0,0],isDynamic:this.monitor.get("separateContainer"),renderLayout:this._renderLayoutCallback,pixelPerfect:this.monitor.get("pixelPerfect")}},_renderLayout:function(t){var e=this.getLayoutSync();e&&e.renderLayout(t)},getLayoutName:function(){return"canvasLayout"},setupPane:function(){c.superclass.setupPane.call(this),this._graphicsShape.setContainerPane(p.getContainer(this.getPane()))},clearPane:function(){c.superclass.clearPane.call(this),this._graphicsShape.removeFromContainer()},createLayout:function(t){var e=new t(this.getLayoutData(),this.getLayoutParameters());return e.build(),e.events.add("update",this._onLayoutUpdate,this),e},destroyLayout:function(t){t.events.remove("update",this._onLayoutUpdate,this),t.destroy()},_onLayoutUpdate:function(){this._graphicsShape&&this._graphicsShape.update()},applyPosition:function(){this._graphicsShape.setGeometry(this._calculateShapeGeometry())},_calculateShapeGeometry:function(){var t=this.getLayoutSync(),e=t&&t.getSize()||[0,0],a=t&&t.getOffset&&t.getOffset()||[0,0],n=this.getPosition(),i=[[0,0],e],o=[n[0]+a[0],n[1]+a[1]],s=[[i[0][0]+o[0],i[0][1]+o[1]],[i[1][0]+o[0],i[1][1]+o[1]]];return new u(s)}}),t(c)});}],
['9;', function (ym) {
ym.modules.define("overlay.Base",["util.defineClass","event.Manager","event.Mapper","overlay.component.LayoutEventMappingTable","option.Manager","overlay.optionMapper","Monitor","interactivityModel.EventController","Event","overlay.PaneController"],function(t,e,n,i,a,s,o,h,r,p,l){function _(t,e,i){if(ym.env.debug&&!t)throw new Error("BaseOverlay: не передана пиксельная геометрия");this._geometry=t,this._data=e,this.options=new s(i,null,null,o),this.options.events.add("change",this._onOptionsChange,this),this.monitor=new h(this.options),this.events=new n({context:this}),this._map=null,this._shape=f,this._eventMapper=null,this._interactivityEventController=null,this._paneController=null,this._paneKey=null,this._mapStateMonitor=null}var f={};e(_,{setMap:function(t){if(this._map!=t){var e=this._map;e&&(this.removeFromMap(e),this._paneController.destroy(),this._paneKey=null,this._clearInteractivity(),this.monitor.removeAll(),this._mapStateMonitor.destroy(),this._mapStateMonitor=null),this._map=t,this._map&&(this._mapStateMonitor=new h(this._map.state).add("useOverlayMovablePaneWhenPossible",this._refreshPane,this),this.bindOptions(this.monitor),this._setupInteractivity(),this._paneKey=this._getEffectivePaneKey(this.monitor.get("pane")),this._paneController=new l(this.getMap().panes.get(this._paneKey),{onZoomChange:this.onPaneZoomChange,onClientPixelsChange:this.onPaneClientPixelsChange,onClientPixelsTransition:this.onPaneClientPixelsTransition},this),this.addToMap()),this.updateShape(),this._fireMapChange(e)}},getMap:function(){return this._map},bindOptions:function(t){t.add("interactivityModel",this._onInteractivityModelChange,this).add("pane",this.onPaneChange,this,{defaultValue:this.getDefaultPane()}).add("zIndex",this.onZIndexChange,this).add("offset",this.onOffsetChange,this)},_fireMapChange:function(t){this.events.fire("mapchange",new p({oldMap:t,newMap:this._map,type:"mapchange",target:this}))},setGeometry:function(t){if(t!=this._geometry){var e=this._geometry;this._geometry=t,this._map&&this.applyGeometry(),this.updateShape(),this._fireGeometryChange(e)}},getGeometry:function(){return this._geometry},applyGeometry:function(){},_fireGeometryChange:function(t){this.events.fire("geometrychange",new p({oldGeometry:t,newGeometry:this._geometry,target:this,type:"geometrychange"}))},setData:function(t){var e=this._data;this._data=t,this._map&&this.applyData(),this._fireDataChange(e)},getData:function(){return this._data},applyData:function(){},_fireDataChange:function(t){this.events.fire("datachange",new p({oldData:t,newData:this._data,type:"datachange",target:this}))},getShape:function(){return this._shape==f?this._shape=this.createShape():this._shape},createShape:function(){return null},updateShape:function(){this._shape=f,this._map&&this.applyShape(),this.events.fire("shapechange")},applyShape:function(){},isEmpty:function(){return!1},getPane:function(){return this._paneKey?this.getMap().panes.get(this._paneKey):null},onPaneChange:function(t){var e=this._getEffectivePaneKey(t);this._paneKey!=e&&(this._paneKey=e,this._paneController.setPane(this.getMap().panes.get(this._paneKey)))},resolvePaneKey:function(t,e){return t},resolvePane:function(t){return this.getMap().panes.get(this._getEffectivePaneKey(t))},_refreshPane:function(){var t=this.monitor.get("pane"),e=this._getEffectivePaneKey(t);this._paneKey!=e&&this.onPaneChange(t)},_getEffectivePaneKey:function(t){return this.resolvePaneKey(t,this._mapStateMonitor.get("useOverlayMovablePaneWhenPossible"))},onPaneClientPixelsTransition:function(){},getOffsetGeometry:function(t){var e=this.monitor.get("offset");return e?t.shift(e):t},onOffsetChange:function(){this.applyGeometry(),this.updateShape()},_setupInteractivity:function(){this._interactivityEventController=new r(this.monitor.get("interactivityModel")),this.events.addController(this._interactivityEventController)},_clearInteractivity:function(){this.events.removeController(this._interactivityEventController),this._interactivityEventController=null},_onInteractivityModelChange:function(t){this._interactivityEventController.setInteractivityModel(t)},getEventMapper:function(){return this._eventMapper||(this._eventMapper=new i(this.events,new a(this)))},_onOptionsChange:function(){this.events.fire("optionschange")}}),t(_)});}],
['9i', function (ym) {
ym.modules.define("overlay.component.DomCursorController",["util.defineClass","util.cursor.Manager"],function(t,o,r){function i(t,o,i,e){this._optionMonitor=t,this._optionName=i||"cursor",this._cursorManager=new r(o),this._optionMonitor.add("interactiveOpt",this._onInteractiveChange,this,{resolveCallback:function(t,o){return o.get("interactive",!0)}}).add(this._optionName,this._onCursorChange,this,{defaultValue:e||"inherit"}),this._setupCursor()}o(i,{destroy:function(){this._clearCursor(),this._optionMonitor.remove(this._optionName).remove("interactiveOpt")},_setupCursor:function(){this._currentCursor=this._cursorManager.push(this._optionMonitor.get("interactiveOpt")?this._optionMonitor.get(this._optionName):"inherit")},_clearCursor:function(){this._currentCursor.remove()},_onCursorChange:function(){this._clearCursor(),this._setupCursor()},_onInteractiveChange:function(){this._clearCursor(),this._setupCursor()}}),t(i)});}],
['$X', function (ym) {
ym.modules.define("overlay.view.Hotspot",["util.defineClass","overlay.view.Base","Hotspot","hotspot.Manager","util.array"],function(t,e,s,n,o,i){function a(t){this._shape=t.shape,this._eventMapper=t.eventMapper,this._containerPane=t.containerPane,this._pane=t.pane,this._monitorInteractiveOption=t.monitorInteractiveOption,a.superclass.constructor.call(this,t),this._hotspot=null,this._hotspotManager=null,this._cursorHandler=null,this._containerZIndex=0,this._addToPane()}function r(t){var e=3;if(i.isArray(t)){for(var s=0,n=t.length;s<n;++s)e=Math.max(e,+t[s]);t=e}return Math.max(3,+t)}e(a,s,{bindOptions:function(){this.monitor.add("strokeWidth",this._onStrokeWidthChange,this,{resolveCallback:this._resolveStrokeWidth}).add("cursor",this._onCursorChange,this,{defaultValue:"inherit"}),this._monitorInteractiveOption&&this.monitor.add("interactive",this._onInteractiveChange,this,{defaultValue:!0})},setPane:function(t){this._removeFromPane(),this._pane=t,this._addToPane()},setShape:function(t){this._shape=t,this._updateHotspot()},setContainerPane:function(t){this._containerPane&&this._clearContainerPaneListeners(),this._containerPane=t,this._containerPane&&this._setupContainerPaneListeners(),this._updateHotspotManager()},applyZIndex:function(){this._hotspot&&this._hotspot.setZIndex(this.getZIndex())},destroy:function(){this._removeFromPane(),a.superclass.destroy.call(this)},_onInteractiveChange:function(){this._updateHotspot()},_updateHotspot:function(){this._isValidShape()&&this._isInteractive()?this._hotspot?this._hotspot.setShape(this._createHotspotShape()):this._setupHotspot():this._hotspot&&this._clearHotspot()},_addToPane:function(){this._setupHotspotManager(),this._isValidShape()&&this._isInteractive()&&this._setupHotspot(),this._containerPane&&this._setupContainerPaneListeners()},_removeFromPane:function(){this._containerPane&&this._clearContainerPaneListeners(),this._hotspot&&this._clearHotspot(),this._clearHotspotManager()},_setupHotspotManager:function(){this._hotspotManager=o.get(this._pane),this._containerZIndex=(this._containerPane||this._pane).getZIndex()},_clearHotspotManager:function(){this._hotspotManager=null},_setupContainerPaneListeners:function(){this._containerPane.events.add("zindexchange",this._onContainerPaneZIndexChange,this)},_clearContainerPaneListeners:function(){this._containerPane.events.remove("zindexchange",this._onContainerPaneZIndexChange,this)},_onContainerPaneZIndexChange:function(){this._updateHotspotManager()},_createHotspotShape:function(){return this._shape.clone({strokeWidth:this.monitor.get("strokeWidth")})},_setupHotspot:function(){this._hotspot=new n(this._createHotspotShape(),this.getZIndex(),{eventsReplayEnabled:!1}),this._hotspot.events.setParent(this._eventMapper),this._hotspotManager.addHotspots([this._hotspot],this._containerZIndex),this._setupCursorListeners()},_clearHotspot:function(){this._cursorHandler&&this._clearCursor(),this._clearCursorListeners(),this._hotspotManager.removeHotspots([this._hotspot],this._containerZIndex),this._hotspot.events.setParent(null),this._hotspot=null},_isValidShape:function(){return this._shape&&this._shape.getGeometry()&&this._shape.getGeometry().getCoordinates().length},_isInteractive:function(){return this._hotspotManager&&(!this._monitorInteractiveOption||this._monitorInteractiveOption&&this.monitor.get("interactive"))},_resolveStrokeWidth:function(t,e){return r(e.get(t,0))},_onStrokeWidthChange:function(){this._hotspot&&this._hotspot.setShape(this._createHotspotShape())},_updateHotspotManager:function(){this._hotspot&&this._hotspotManager.removeHotspots([this._hotspot],this._containerZIndex),this._clearHotspotManager(),this._setupHotspotManager(),this._hotspot&&this._hotspotManager.addHotspots([this._hotspot],this._containerZIndex)},_setupCursorListeners:function(){this._hotspot.events.add("mouseenter",this._onMouseEnter,this).add("mouseleave",this._onMouseLeave,this),this._pane.getMap().events.add("mouseenter",this._onMouseLeave,this)},_clearCursorListeners:function(){this._hotspot.events.remove("mouseenter",this._onMouseEnter,this).remove("mouseleave",this._onMouseLeave,this),this._pane.getMap().events.remove("mouseenter",this._onMouseLeave,this)},_onMouseEnter:function(){this._cursorHandler||this._setupCursor()},_onMouseLeave:function(){this._cursorHandler&&this._clearCursor()},_setupCursor:function(){var t=this.monitor.get("cursor");null!==t&&(this._cursorHandler=this._pane.cursors.push(t))},_clearCursor:function(){this._cursorHandler.remove(),this._cursorHandler=null},_onCursorChange:function(){this._cursorHandler&&(this._clearCursor(),this._setupCursor())}}),t(a)});}],
['$T', function (ym) {
ym.modules.define("overlay.view.BaseWithLayout",["util.defineClass","overlay.view.Base","util.extend","util.dom.element","util.dom.style","option.Manager","overlay.view.component.layoutLoader","util.scheduler.strategy.Raf","vow"],function(t,a,e,i,o,s,n,u,h,l){function r(t,a){this._position=t.position,this._data=t.data,this._pane=t.pane,this._layoutParams=t.layout||{},this._layoutParameters=t.layoutParameters,this._layoutOptionName=t.layoutOptionName||"layout",this._callbacks=a||{},r.superclass.constructor.call(this,t),this._layout=null,this._layoutData=null,this._layoutDeferred=null,this._layoutLoadHandler=null,this.createLayoutContainer(t),this._viewportChangeHandler=this._onViewportChangeTimeout.bind(this),this._viewportChangeScheduler=0,this.setupPane(),this._setupLayout(this._createLayout),this.applyPosition(),this._shape=this._calculateShape(),this._emptiness=this._calculateEmptiness()}r.LayoutNotFound=function(){return new Error("Layout wasn't found")},r.WasNotAddedToMap=function(){return new Error("Overlay wasn't added to map")},a(r,e,{bindOptions:function(t){this._layoutOptions=new n(this._layoutParams.options||{},this.options,this._layoutParams.optionManagerName),t.add(this._layoutOptionName,this._onLayoutChange,this,{defaultValue:this._layoutParams.defaultValue})},setPosition:function(t){this._position=t,this.applyPosition()},getPosition:function(){return this._position},setData:function(t){this._data=t,this._layoutData=null,this._layout&&this._layout.setData(this.getLayoutData())},getData:function(){return this._data},getLayoutData:function(){return this._layoutData||(this._layoutData=i({},this._data,{options:this._layoutOptions}))},setPane:function(t){this.clearPane(),this._pane=t,this.setupPane()},getPane:function(){return this._pane},setupPane:function(){this._pane.getMap().options.get("disableOverlayActiveViewportReaction")||(this._layoutOptions.set("viewport",this._calculateObjectViewport(this._pane.getViewport())),this._pane.events.add("viewportchange",this._onViewportChange,this))},clearPane:function(){this._clearViewportChangeTimeout(),this._pane.events.remove("viewportchange",this._onViewportChange,this)},_onViewportChange:function(){this._clearViewportChangeTimeout(),this._viewportChangeScheduler=new h(this._viewportChangeHandler,this),this._viewportChangeScheduler.start()},_onViewportChangeTimeout:function(){this._layoutOptions.set("viewport",this._calculateObjectViewport(this._pane.getViewport()))},_clearViewportChangeTimeout:function(){this._viewportChangeScheduler&&(this._viewportChangeScheduler.stop(),this._viewportChangeScheduler=0)},_calculateObjectViewport:function(t){var a=this._pane.getMap().getGlobalPixelCenter(),e=this._position,i=[e[0]-a[0],e[1]-a[1]];return[[t[0][0]-i[0],t[0][1]-i[1]],[t[1][0]-i[0],t[1][1]-i[1]]]},getLayout:function(){return this._layoutLoadHandler&&this._layoutLoadHandler.isActive()?(this._layoutDeferred||(this._layoutDeferred=l.defer()),this._layoutDeferred.promise()):this._layout?l.resolve(this._layout):l.reject(r.LayoutNotFound())},getLayoutSync:function(){return this._layout},setLayoutParameters:function(t){this._layoutParameters=t,this._layout&&this._layout.setParameters&&this._layout.setParameters(t)},getLayoutParameters:function(){return this._layoutParameters},_setupLayout:function(t){var a={layout:this.monitor.get(this._layoutOptionName),data:this.getLayoutData(),name:this.getLayoutName()},e=u.get(a);"undefined"==typeof e?this._layoutLoadHandler=u.load(a,this._onLayoutLoadSuccess,this._onLayoutLoadFail,this):t.call(this,e)},_onLayoutLoadSuccess:function(t){this._layout&&this._destroyLayout(),this._createLayout(t),this.applyPosition(),this._callBackLayoutChange(),this.updateShape(),this._updateEmptiness(),this._layoutDeferred&&(this._layoutDeferred.resolve(this._layout),this._layoutDeferred=null)},_onLayoutLoadFail:function(){this._layout&&(this._destroyLayout(),this._callBackLayoutChange(),this.updateShape(),this._updateEmptiness()),this._layoutDeferred&&(this._layoutDeferred.reject(r.LayoutNotFound()),this._layoutDeferred=null)},_callBackLayoutChange:function(){var t=this._callbacks.onLayoutChange;t&&t.callback.call(t.context)},_createLayout:function(t){this._layout=this.createLayout(t),this._layout.events.add("emptinesschange",this._updateEmptiness,this).add("shapechange",this.updateShape,this)},_destroyLayout:function(){this._layout.events.remove("emptinesschange",this._updateEmptiness,this).remove("shapechange",this.updateShape,this),this.destroyLayout(this._layout),this._layout=null},_onLayoutChange:function(t){this._layoutLoadHandler&&this._layoutLoadHandler.isActive()&&this._layoutLoadHandler.cancel(),this._setupLayout(this._onLayoutLoadSuccess)},setCallbacks:function(t){this._callbacks=t},getCallbacks:function(){return this._callbacks},destroy:function(){this._layoutDeferred&&(this._layoutDeferred.reject(r.WasNotAddedToMap()),this._layoutDeferred=null),this._layoutLoadHandler&&this._layoutLoadHandler.isActive()&&this._layoutLoadHandler.cancel(),this._layout&&this._destroyLayout(),this.clearPane(),r.superclass.destroy.call(this)},getLayoutOptions:function(){return this._layoutOptions},getShape:function(){return this._shape},updateShape:function(){this._shape=this._calculateShape();var t=this._callbacks.onShapeChange;t&&t.callback.call(t.context,this._shape)},_calculateShape:function(){var t=this._layout&&this._layout.getShape();return t?t:null},isEmpty:function(){return this._emptiness},_updateEmptiness:function(){this._emptiness=this._calculateEmptiness();var t=this._callbacks.onEmptinessChange;t&&t.callback.call(t.context)},_calculateEmptiness:function(){return!this._layout||"function"==typeof this._layout.isEmpty&&this._layout.isEmpty()}}),t(r)});}],
['5(', function (ym) {
ym.modules.define("graphics.shape.Layout",["util.defineClass","graphics.shape.Base"],function(e,t,s){var i=function(e){this.renderMode="layout",i.superclass.constructor.call(this,e),this._coordinates=e};t(i,s,{setGeometry:function(e){this._coordinates=e,this.updateView()},getBounds:function(){return this._coordinates.getBounds()},setupGeometry:function(e){e.setGeometry(this._coordinates)},createGraphics:function(e){return this.invokeGraphicsFabric(this.renderMode,e.render,e)}}),e(i)});}],
['9z', function (ym) {
ym.modules.define("overlay.component.globalOrderCounter",[],function(n){var e=0;n(function(){return e++})});}],
['5$', function (ym) {
ym.modules.define("graphics.renderManager",["graphics.renderManager.pane","util.Associate"],function(e,r,n){var a=new n(function(e,n){return new r(e,n)});e({getContainer:function(e){var r=e.getMap();if(ym.env.debug&&!r)throw new Error("graphics.render.sliceshape.manager: передан пустой указатель на контейнер");return a.get(e)}})});}],
['5D', function (ym) {
ym.modules.define("graphics.render.canvas.shape.Layout",["util.defineClass","graphics.render.canvas.view","graphics.render.canvas.tech"],function(t,a,e,s){function r(){r.superclass.constructor.call(this),this._renderedImage=null,this._renderedImageHref=""}a(r,e,{setGeometry:function(t){this._geometry!=t&&(this._geometry=t,this.updateGeometry())},needCanvasLock:function(){return this.attributes.opacity<1},getBounds:function(){var t=r.superclass.getBounds.call(this);if(this.attributes.rotation){for(var a=this.attributes.offset||[0,0],e=this.attributes.rotation*Math.PI/180,s=[t[1][0]-t[0][0],t[1][1]-t[0][1]],i=Math.cos(e),h=Math.sin(e),n=[[0,0],[s[0],0],[s[0],s[1]],[0,s[1]]],o=[],u=[],c=0;c<4;++c)n[c][0]+=a[0],n[c][1]+=a[1],n[c]=[n[c][0]*i-n[c][1]*h,n[c][0]*h+n[c][1]*i],n[c][0]+=-a[0]+t[0][0],n[c][1]+=-a[1]+t[0][1],o.push(n[c][0]),u.push(n[c][1]);return[[Math.floor(Math.min.apply(Math,o)),Math.floor(Math.min.apply(Math,u))],[Math.ceil(Math.max.apply(Math,o)),Math.ceil(Math.max.apply(Math,u))]]}return t},render:function(){r.superclass.render.call(this),this.canvas.save();var t=this._geometry.getBounds(),a=[this.shiftBy[0]+t[0][0],this.shiftBy[1]+t[0][1]];if(this.canvas.translate(this.attributes.pixelPerfect?Math.round(a[0]):a[0],this.attributes.pixelPerfect?Math.round(a[1]):a[1]),this.attributes.rotation){var a=this.attributes.offset||[0,0];this.canvas.translate(-a[0],-a[1]),this.canvas.rotate(this.attributes.rotation*Math.PI/180),this.canvas.translate(a[0],a[1])}this.attributes.renderLayout({canvasContext:this.canvas,renderAttributes:this.attributes}),this.canvas.restore(),this.renderUpdated()}}),s.registerShape("layout",r),t(r)});}],
['9Q', function (ym) {
ym.modules.define("overlay.component.LayoutEventMappingTable",["util.defineClass","constants.mapDomEvents","Event"],function(e,t,n,a){function i(e){this._overlay=e,this._createMappings()}t(i,{_createMappings:function(){for(var e=0,t=n.length;e<t;e++)this[n[e]]=this._defaultMapping;this.parentelementchange=!1,this.emptinesschange=!1,this.shapechange=!1,this["*"]=this._defaultMapping},_defaultMapping:function(e){return new a({type:e.get("type"),target:this._overlay,domEvent:e.get("domEvent"),originalEvent:e},e)}}),e(i)});}],
['$S', function (ym) {
ym.modules.define("overlay.view.Base",["util.defineClass","Monitor"],function(n,t,i){function e(n){this._zIndex=n.zIndex,this.options=n.options,this.monitor=new i(this.options),this.bindOptions(this.monitor)}t(e,{setZIndex:function(n){this._zIndex=n,this.applyZIndex()},updateClientPixelsTranstion:function(){},updateShape:function(){},getZIndex:function(){return this._zIndex},destroy:function(){this.monitor.removeAll()}}),n(e)});}],
['$U', function (ym) {
ym.modules.define("overlay.view.component.layoutLoader",["layout.storage","canvasLayout.storage","util.cancelableCallback"],function(a,e,n,t){var o={domLayout:e,canvasLayout:n};a({get:function(a){var e=o[a.name],n=a.layout;return n&&"string"!=typeof n&&n[a.name]&&(n=n[a.name]),e.get(n,a.data)},load:function(a,e,n,c){var r=!0,u=t.create(function(a){r=!1,e.call(c,a)}),l=t.create(function(a){r=!1,n.call(c,a)}),i=o[a.name],y=a.layout;return y&&"string"!=typeof y&&y[a.name]&&(y=y[a.name]),i.require({keys:[y],data:a.data}).spread(u,l,this).done(),{isActive:function(){return r},cancel:function(){r=!1,u.cancel(),l.cancel()}}}})});}],
['5.', function (ym) {
ym.modules.define("graphics.shape.Base",["util.defineClass","util.dom.style","util.pixelBounds","event.Manager","Event","graphics.render.factory","graphics.frameTypes"],function(e,t,n,i,s,r,h,a){var o=function(e){this._graphicRepresentation=null,this._renderOptions=null,this.events=new s,this._hasTunedGraphics=!1,e&&this.setGeometry(e)},p="geometryUpdate",c="geometryModify",d="needRedraw";t(o,{CLIPPING_DELTA_OFFSET:256,CLIPPING_DELTA_JITTER:128,setRenderOptions:function(e){this._renderOptions=e,this._topPane&&(this._topPane.setZIndex(e.zIndex),this._topPane.setOrder(e.zOrder)),this._hasTunedGraphics?this.getGraphics(this._renderOptions).changeAttributes(this._renderOptions):this.getGraphics(this._renderOptions),this.isDynamic=e.isDynamic},getZIndex:function(){return this._renderOptions&&this._renderOptions.zIndex||0},getZOrder:function(){return this._renderOptions&&this._renderOptions.zOrder||0},getGraphics:function(e){e&&(this._renderOptions=e);var t=this.getGraphicRepresentation(e);return this._hasTunedGraphics?t:(this.setupGeometry(t),this._hasTunedGraphics=!0,this.patchGraphics(t))},getGraphicRepresentation:function(e){if(!this._graphicRepresentation){var t=e||this._renderOptions;t&&(this._graphicRepresentation=this.createGraphics(t),this._graphicsEvents=this._graphicRepresentation.events.group(),this._graphicsEvents.add(p,this._onGeometryChange,this),this._graphicsEvents.add(c,this._onGeometryModify,this),this._graphicsEvents.add(d,this._onRedrawAsk,this)),this._hasTunedGraphics=!1}return this._graphicRepresentation},_onGeometryChange:function(){this.events.fire(p)},_onGeometryModify:function(){this.events.fire(c)},_onRedrawAsk:function(){this.events.fire(d)},invokeGraphicsFabric:function(e,t,n){return h.create(e,t,n)},createGraphics:function(e){},setupGeometry:function(e){},patchGraphics:function(e){return e.setBounds(this.getBounds()),e.setAttributes(this._renderOptions),e},flush:function(){this._topPane&&this._topPane.flush()},getBounds:function(){return null},updateView:function(e){var t=this.getGraphicRepresentation();t&&this.setupGeometry(t),t&&t.setBounds(this.getBounds()),e&&t&&(this.reposite(a.SLOW),this.flush())},update:function(){var e=this.getGraphicRepresentation();e&&e.updateGeometry()},setActiveRegion:function(e,t){this.activeRegion={region:i.clone(e)};var n=this.getGraphicRepresentation().getPane();n&&n.updateClipping(e,!1,t)},reposite:function(e){if(!this._topPane)return!1;this.getGraphicRepresentation().shouldSetActiveRegionOnReposite(e)&&this.setActiveRegion(this._containerPane.getVisibleBounds(this.CLIPPING_DELTA_OFFSET),this.CLIPPING_DELTA_JITTER);var t=!1;if(this._topPane.margin){var i=this._containerPane.toClientPixels([this._topPane.margin.left,this._topPane.margin.top]),s=this._topPane.clippingOffset;n.setPosition(this._topPane.holder(),[i[0]+s[0],i[1]+s[1]]),this._topPane.isClipped()&&(t=!0)}return this._topPane.setZIndex(this._renderOptions.zIndex),this._topPane.setOrder(this._renderOptions.zOrder),n.css(this._topPane.holder(),{zIndex:this._renderOptions.zIndex}),t||this._topPane.isChanged()},setContainerPane:function(e){this._containerPane=e,this._containerPane.add(this)},attachToContainer:function(){if(!this._topPane){var e=this.getGraphics();this._topPane=e.createPane(),this._topPane.setPositionPolicy(!1,!1),this._topPane.addShape(e),this._topPane.onRenderEnd(this.reposite.bind(this,a.SLOW)),this._topPane.events.add("orderChange",this._onPaneOrderChange,this)}this.reposite(a.SLOW)},detachFromContainer:function(){if(this._topPane&&this._topPane){this._topPane.events.remove("orderChange",this._onPaneOrderChange,this),this._topPane.removeAll();var e=this._topPane.holder();e.parentNode&&e.parentNode.removeChild(e),this._topPane=null}},isClipped:function(){var e=this.getPane();return!!e&&e.isClipped()},getPane:function(){return this._topPane},getTechName:function(){return this.getGraphicRepresentation().paneName()},_onPaneOrderChange:function(){this.events.fire("orderChange",new r({sender:this}))},removeFromContainer:function(){this._containerPane?this._containerPane.remove(this):this.detachFromContainer(),this._graphicsEvents&&this._graphicsEvents.removeAll(),this._graphicsEvents=null,this._graphicRepresentation=null}}),e(o)});}],
['5M', function (ym) {
ym.modules.define("graphics.render.canvas.view",["util.defineClass","graphics.render.base.view","util.pixelBounds","graphics.render.canvas.util","graphics.render.canvas.tech"],function(t,a,s,i,e,r){function l(){l.superclass.constructor.call(this)}var n=e.scaleFactor,h="AndroidBrowser"==ym.env.browser.name||"Presto"==ym.env.browser.engine;a(l,s,{createPane:function(){return r.createPane()},registerShape:function(t,a){r.registerShape(t,a)},paneName:function(){return"canvas"},setPane:function(t){l.superclass.setPane.apply(this,arguments)},willAttributeReflow:function(t){return!0},_createColor:function(t,a){return a&&(t=t.slice(0),t[3]=a),4==t.length?"rgba("+t.join(",")+")":"rgb("+t.join(",")+")"},_onFillImageLoad:function(t,a){this.attributes&&(this.attributes.fillPattern=null),l.superclass._onFillImageLoad.call(this,t,a)},setStyles:function(t){this.setFillStyles(t),this.canvas.globalAlpha=this.temporaryCanvas?1:this.attributes.opacity},setLineStyles:function(t,a){this.canvas.lineWidth=t.width||0,this.canvas.strokeStyle=t.color?this._createColor(t.color,a.alpha):"transparent",this.canvas.lineJoin="round",this.canvas.lineCap="round",this.isNativeStrokeStyleSupported()&&(this.canvas.setLineDash(t.setup.dash?t.setup.dash:[]),this.canvas.lineDashOffset=+(t.setup.offset||0))},isNativeStrokeStyleSupported:function(){return this.canvas.setLineDash&&!h},setFillStyles:function(t){if(t=t||{},this._hasStretchFill()&&(t.alpha=1),this.canvas.fillStyle=this.attributes.fill?this._createColor(this.attributes.fill.color,t.alpha):"transparent",this.attributes.fill.background&&this.attributes.fill.background.image){if("tile"==this.attributes.fill.background.style){var a=this.attributes.fill.color?this._createColor(this.attributes.fill.color,!1):"transparent",s=a+"_"+this.attributes.fill.extOpacity;if(this.attributes.fillPattern&&this.attributes.fillPatternCacheId==s);else{var i=this.attributes.fill.background.image;this.attributes.fillPattern=this.canvas.createPattern(e.preparePatternFill(a,this.attributes.fill.extOpacity,i.image,i.scaleRatio),"repeat"),this.attributes.fillPatternCacheId=s}t.alpha||(this.canvas.fillStyle=this.attributes.fillPattern)}}else this.attributes.fillPattern=null},applyDynamicStyles:function(){},closeAndFill:function(){if(this.attributes.fill&&(this.attributes.fill.extOpacity||this.attributes.fill.image)){var t="evenOdd"==this.attributes.fill.fillRule?"evenodd":"nonzero";this.canvas.msFillRule=t,this.canvas.fill(t),this.applyBackgroundFill()}this.stroke()},stroke:function(t){var a,s=0;if(this.attributes.stroke)for(;a=this.getStrokeSettings(s);)this.isVisibleStroke(a)&&(this.setLineStyles(a,{}),this.drawStroke(s,a)),s++},drawStroke:function(t,a){this.canvas.stroke()},holder:function(){return this.temporaryCanvas?this.temporaryCanvas.element:this.pane.holder()},needCanvasLock:function(){return this._hasBackgroundFill()||this.attributes.opacity<1&&this.attributes.stroke&&this.attributes.fill.exists},lockCanvas:function(t,a,s,r){if(this.tempCanvas=0,t.save(),this.needCanvasLock()){var l=this.pane.calculateLockRegion(this),h=i.getSize(l);this.temporaryCanvas=e.tempPBuffer(h[0],h[1]),this.temporaryCanvas.offset=[s[0]-l[0][0],s[1]-l[0][1]],this.temporaryCanvas.canvas.save(),this.temporaryCanvas.canvas.setTransform(1,0,0,1,0,0);var o=n(this.temporaryCanvas.canvas);return this.temporaryCanvas.canvas.scale(o,o),this.temporaryCanvas.canvas.transform(1,0,0,1,this.temporaryCanvas.offset[0],this.temporaryCanvas.offset[1]),this.canvas=this.temporaryCanvas.canvas}return this.canvas=t,t.scale(n(t),n(t)),t},releaseCanvas:function(t,a){if(this.temporaryCanvas){var s=(this.getBounds(),n(a));a.globalAlpha=this.attributes.opacity,a.drawImage(this.temporaryCanvas.element,-this.temporaryCanvas.offset[0]*s,-this.temporaryCanvas.offset[1]*s),a.globalAlpha=1,a.restore(),this.temporaryCanvas.release(),this.temporaryCanvas=0}else a.restore();this.canvas.globalAlpha=1},_hasBackgroundFill:function(){return this.attributes.fill&&this.attributes.fill.background&&this.attributes.fill.background.image},_hasStretchFill:function(){return this._hasBackgroundFill()&&"stretch"==this.attributes.fill.background.style},_hasTileFill:function(){return this._hasBackgroundFill()&&"tile"==this.attributes.fill.background.style},applyBackgroundFill:function(){if(this._hasStretchFill()&&this.attributes.fill.background.image){var t=this.getBounds(),a=this.canvas.globalAlpha;this.canvas.globalAlpha=this.attributes.fill.extOpacity,this.canvas.globalCompositeOperation="source-in",this.canvas.drawImage(this.attributes.fill.background.image.image,t[0][0]+this.shiftBy[0],t[0][1]+this.shiftBy[1],t[1][0]-t[0][0],t[1][1]-t[0][1]),this.canvas.globalCompositeOperation="source-over",this.canvas.globalAlpha=a}},render:function(){this.setStyles(),this.fixTileFill()},fixTileFill:function(){if(this._hasTileFill()&&this.attributes.fill.background.image){var t=this.shiftBy,a=this.getBounds(),s=this.attributes.fill.background.image.size,i=[t[0]+a[0][0],t[1]+a[0][1]],e=n(this.canvas),r=i[0]%(e*s[0]),l=i[1]%(e*s[1]);this.shiftBy[0]-=r,this.shiftBy[1]-=l,this.canvas.translate(r,l),this.deltaOffset=[r,l]}else this.deltaOffset=[0,0]}}),t(l)});}],
['5K', function (ym) {
ym.modules.define("graphics.render.canvas.tech",["util.defineClass","graphics.render.base.tech","graphics.render.canvas.pane"],function(e,n,c,r){function a(){a.superclass.constructor.call(this)}n(a,c,{createPane:function(){return new r}}),e(new a)});}],
['5P', function (ym) {
ym.modules.define("graphics.render.factory",["graphics.render.svg.tech","graphics.render.canvas.tech"],function(r,e,n){function t(r){return n.isShapeSupported(r)?"canvas":e.isShapeSupported(r)?"svg":null}function a(r,e){return t(r)}var i={canvas:{name:"Canvas",driver:n},svg:{name:"SVG",driver:e}},s={create:function(r,e){var n=e&&"!"==e.charAt(0),s=e;if(n&&(e=e.substr(1)),e=e?e.toLowerCase():t(r),e&&this.isSupported(r,e)||(e&&!this.isSupported(e,e)&&(e=null),e=n?null:a(r,e)),!e)throw new Error("Graphics.Factory.Create: "+s+": "+r+" - не известный примитив");return i[e].driver.createShape(r)},createPane:function(r){return i[r].driver.createPane()},listRenders:function(){var r=[];for(var e in i)i.hasOwnProperty(e)&&r.push(e);return r},isSupported:function(r,e){return e=e?e.toLowerCase():null,r=r.toLowerCase(),e?e in i&&("*"==r||i[e].driver.isShapeSupported(r)):t(r)}};r(s)});}],
['5m', function (ym) {
ym.modules.define("graphics.frameTypes",[],function(e){var a={NONE:0,FAST:1,SLOW:2};e(a)});}],
['5-', function (ym) {
ym.modules.define("graphics.renderManager.ShapeStorage",["util.List","util.id","util.pixelBounds","graphics.renderManager.constants"],function(e,t,i,s,n){function h(e,i){this._wrappers=new t,this._wrapperByShape={},this._nodePane=e,this._callbacks=i,this._viewportBounds=null,this._viewportBoundsGen=0}function a(e,t){this.shapeId=t,this.shape=e,this.visible=!1,this.deleted=!1,this._storage=null,this._events=null,this.recalculate()}function r(e,t){return e&&t&&e[0][0]==t[0][0]&&e[0][1]==t[0][1]&&e[1][0]==t[1][0]&&e[1][1]==t[1][1]}var o=n.tileSize;h.prototype={add:function(e){var t=this._wrap(e);this._wrappers.insert(t),t.link(this)},remove:function(e){var t=this._wrap(e);t.deleted=!0,this._wrappers.remove(t),t.unlink(),this._nodePane.remove(e),this._wrapperByShape[t.shapeId]=void 0},update:function(e){this._nodePane.update(e)},onShapeUpdate:function(e){this._callbacks.onShapeUpdate(e.shape)},_wrap:function(e){var t=i.get(e);return this._wrapperByShape[t]=this._wrapperByShape[t]||new a(e,t),this._wrapperByShape[t]},peformViewportCulling:function(e){var t=[[0,0],[0,0]];t[0][0]=Math.floor(e[0][0]/o)*o,t[0][1]=Math.floor(e[0][1]/o)*o,t[1][0]=Math.ceil(e[1][0]/o)*o,t[1][1]=Math.ceil(e[1][1]/o)*o,r(t,this._viewportBounds)||(this._viewportBounds=t,this._viewportBoundsGen++);for(var i=this._wrappers.first;i;i=i.next){var n=i.obj;if(n.boundsCheckGen!=this._viewportBoundsGen){var h=n.isPersistentVisible||s.areIntersecting(this._viewportBounds,n.bounds);n.boundsCheckGen=this._viewportBoundsGen,h!=n.visible&&(h?(n.visible=!0,this._nodePane.add(n.shape)):(n.visible=!1,this._nodePane.hide(n.shape)))}}}},a.prototype.link=function(e){this.unlink(),this._storage=e,this._events=this.shape.events.group().add(["geometryUpdate","geometryChanged","needRedraw","orderChange"],this._onShapeGeometryChange,this)},a.prototype.unlink=function(){this._events&&(this._events.removeAll(),this._events=null)},a.prototype.recalculate=function(){var e=this.shape.getBounds();this.bounds=e,this.boundsCheckGen=0,this.position=s.getCenter(e),this.size=s.getSize(e),this.zIndex=this.shape.getZIndex(),this.isPersistentVisible="canvas"==this.shape.getTechName()},a.prototype._onShapeGeometryChange=function(){this.recalculate(),this._storage.onShapeUpdate(this)},e(h)});}],
[',f', function (ym) {
ym.modules.define("util.scheduler.Group",["util.defineClass","util.scheduler.manager"],function(e,t,s){function n(){this._taskStorage={},this._onComplete=this._onScheduleComplete.bind(this)}t(n,{_onScheduleComplete:function(e){this._taskStorage[e]&&delete this._taskStorage[e]},schedule:function(e,t,n,o){var u=s.schedule(e,t,n,o,{onComplete:this._onComplete});return u.isCompleted()||(this._taskStorage[u.scheduleId]=u),u},unschedule:function(e,t,n){return!!this.isScheduled(e,t,n)&&s.unschedule(e,t,n)},isScheduled:function(e,t,n){return this._taskStorage[s.getScheduleId(e,t,n)]||!1},removeAll:function(){var e=this._taskStorage;for(var t in e)e.hasOwnProperty(t)&&e[t].stop()}}),e(n)});}],
['4Q', function (ym) {
ym.modules.define("graphics.component.PerformanceMeasurer",["util.defineClass","graphics.component.Measurer","util.hd"],function(e,t,r,o){function i(e){this._options=e,this._measurer=new r({interval:32,minimalCount:10,percentile:.8,report:this._stageDone,reportContext:this,preprocess:function(e,t){return e.value=e.pureValue-t.pureValue,e}}),this._corrector=new r({interval:5e3,percentile:.9,report:this._report,reportContext:this,preprocess:function(e,t){return e.value=e.pureValue,e}})}function n(e){var t=e[0]*e[1];return t>1e6?Math.round(t/1e6):t<1e5?(.01*Math.ceil(t/1e6)).toFixed(2):(.1*Math.ceil(t/1e5)).toFixed(1)}var s=ym.env.browser,u=s.isMobile||s.isTablet;t(i,{clear:function(){this._ticks=[]},destroy:function(){this.clear(),this._measurer.destroy(),this._corrector.destroy()},measure:function(){this._measurer.measure()},getTrackName:function(e){return(u?"mobile":"PC")+(".DPR"+o.getPixelRatio())+("."+n(e)+"M")},_stageDone:function(e){this._corrector.measure(e.value)},_report:function(e){e.count>1&&this._options.report.call(this._options.reportContext,e,this)}}),e(i)});}],
['5u', function (ym) {
ym.modules.define("graphics.render.base.view",["util.defineClass","Event","event.Manager","graphics.generator.clip","graphics.util.color","graphics.util.stroke","graphics.util.image","util.pixelBounds"],function(t,i,e,s,r,n,a,o,l){var h=16383,u=0,f=function(){this.pane=null,this._nameType="",this.geometryGeneration=0,this.renderGeneration=0,this.shiftBy=[0,0],this.attributes=null,this._userAttributes={},this.lastOversizePosition=null,this.events=new s};i(f,{can:function(t){return t in this._Shapes},is:function(t){return this._nameType===t},assignNameType:function(t){this._nameType=t},shift:function(t){this.shiftBy=t.slice(0)},setBounds:function(t){this.baseBounds=t||[[0,0],[0,0]],this.finalizeBounds()},shouldSetActiveRegionOnReposite:function(t){return!0},hasMultiStroke:function(){return this.attributes&&this.attributes.stroke&&this.attributes.stroke.length},isVisibleStroke:function(t){return t.color&&t.width>0&&t.strokeExtOpacity>0},getStrokeSettings:function(t){var i=this.attributes&&this.attributes.stroke&&this.attributes.stroke[t];return!!i&&i},getDeltaWidth:function(){for(var t,i=0,e=0;t=this.getStrokeSettings(e++);)i=Math.max(i,t.width||0);return i},finalizeBounds:function(){var t=this.baseBounds||[[0,0],[0,0]],i=this.getDeltaWidth();i+=.5,this.MBR=[[Math.floor(t[0][0]-i),Math.floor(t[0][1]-i)],[Math.ceil(t[1][0]+i),Math.ceil(t[1][1]+i)]]},getBounds:function(){return this.MBR},isOversized:function(){var t=this.getBounds();return Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1])>this.getOversizeLimit()},getOversizeLimit:function(){return h},performClippingOn:function(t,i,e,s){"undefined"==typeof s&&(s=this.getOversizeLimit());var n=this.pane.calculateLockRegion(this,!0),a=s/2,o=function(t,i){var e=l.getIntersection(t,i);if(!e)return!1;var s=l.getSize(e);return Math.max(Math.abs(s[0]),Math.abs(s[1]))>a};return n[0][0]-=a,n[0][1]-=a,n[1][0]+=a,n[1][1]+=a,t._clippingData=t._clippingData||u++,this.lastOversizePosition&&!o(n,this.lastOversizePosition.location)&&this.lastOversizePosition.data[t._clippingData]||(this.lastOversizePosition||(this.lastOversizePosition={data:[]}),this.lastOversizePosition.location=n,this.lastOversizePosition.data[t._clippingData]=r[i](t,n,e)),this.lastOversizePosition.data[t._clippingData]},willAttributeReflow:function(t){return"fill"==t||"stroke"==t},willAttributeChangeGeometry:function(t){return"strokeWidth"==t||"radius"==t||"stroke"==t||"rotation"==t},setAttributes:function(t){return t&&this.changeAttributes(t),this.finalizeBounds(),this.updateGeometry(),!1},changeAttributes:function(t){var i=!1,s=!1,r=!1,n=[];for(var a in t)t.hasOwnProperty(a)&&(this._userAttributes.hasOwnProperty(a)&&t[a]==this._userAttributes[a]||t[a]!=this._userAttributes[a]&&(((s|=this.willAttributeChangeGeometry(a))||(i|=this.willAttributeReflow(a)))&&n.push(a),this._userAttributes[a]=t[a],r=!0));r&&this.dispatchAttrs(this._userAttributes),i||s?(this.finalizeBounds(),s?(this.events.fire("geometryModify",new e({changed:n})),this.updateGeometry()):(this.events.fire("needRedraw",new e({changed:n})),this.pane&&this.pane.changed(this))):this.applyDynamicStyles()},applyDynamicStyles:function(){this.setStyles()},dispatchAttrs:function(t){this._userAttributes=t,this.attributes||(this.attributes={});var i=this.attributes;i.stroke=this._loadStrokeSettings(t),i.fill=!!t.fill&&this._loadFillSettings(t),i.separateContainer=t.separateContainer,i.pixelPerfect=t.pixelPerfect,i.rotation=t.rotation,i.radius=t.radius,i.offset=t.offset,i.size=t.size,i.href=t.href,i.renderLayout=t.renderLayout,i.zIndex=t.zIndex||0,i.zOrder=t.zOrder||0,i.opacity=t.opacity===!1?1:t.opacity,i.fill&&i.fill.background.imageHref?i.fill.background.imageHref!==this._activeFillImageHref&&(this._fillImage=null,this._activeFillImageHref=i.fill.background.imageHref,this._loadFillImage()):(this._activeFillImageHref=this._fillImage=null,i.fill.background={})},getOriginalAttributes:function(){return this._userAttributes},_loadStrokeSettings:function(t){var i=[],e=t.stroke;if(e&&e.length)for(var s=0,r=e.length;s<r;++s){var o=e[s],l={width:o.strokeWidth||0,opacity:o.strokeColor?n.decode(o.strokeColor)[3]:0,color:n.decode(o.strokeColor,o.strokeExtOpacity),strokeExtOpacity:o.strokeExtOpacity||1};l.setup=a.decodeStyle(o.strokeStyle,l.width),i.push(l)}return!!i.length&&i},_loadFillSettings:function(t){var i={fillRule:t.fillRule,extOpacity:t.fillExtOpacity,color:!!t.fill&&n.decode(t.fillColor,t.fillExtOpacity),background:{imageHref:t.fillImageHref,style:t.fillMethod,image:this._fillImage}};if(i.opacity=i.color?i.color[3]:0,t.fillImageHref){if(t.fillImageHref&&"tile"!=t.fillMethod&&"stretch"!=t.fillMethod&&(i.background.method="tile",ym.env.debug))throw new Error("graphics.render.base.View: задан неверный fillMethod")}else i.background=!1;return i.exists=i.extOpacity>0&&(!!i.color||!!i.background),i},_loadFillImage:function(){this._activeFillImageHref?o.load(this._activeFillImageHref,this._onFillImageLoad,this):(this._fillImage=null,this.updateGeometry())},_onFillImageLoad:function(t,i){i?(this._fillImage={image:t,href:t.src,scaleRatio:t.scaleRatio||1,size:[t.naturalWidth||t.width,t.naturalHeight||t.height]},this.updateGeometry()):this._fillImage=null,this.attributes.fill&&this.attributes.fill.background&&(this.attributes.fill.background.image=this._fillImage)},getZIndex:function(){return this.attributes.zIndex},createPane:function(){},setPane:function(t){this.pane=t,t&&t.changed(this)},getPane:function(){return this.pane},paneName:function(){},updateGeometry:function(){this.geometryGeneration++,this.events.fire("geometryUpdate"),this.lastOversizePosition=null,this.pane&&this.pane.changed(this)},renderUpdated:function(){this.pane&&this.pane.renderUpdated(),this.finish()},finish:function(){},render:function(){},isClipped:function(){var t=this.getPane();return!!t&&t.isClipped()}}),t(f)});}],
['5L', function (ym) {
ym.modules.define("graphics.render.canvas.util",["util.dom.element","util.hd"],function(e,t,a){var n=258,i=0,r=0,c=0,l=0,h=t.create("canvas"),s=h.getContext&&h.getContext("2d");e(i={scaleFactor:function(e){return Math.max(1,a.getPixelRatio()/a.getBackingStorePixelRatio(e||s))},createPBuffer:function(e,a){var r=t.create("canvas"),h=r.getContext("2d"),s=i.scaleFactor(h);return r.width=h.width=Math.max(n,e*s),r.height=h.height=Math.max(n,a*s),{index:c++,element:r,canvas:h,size:[e,a],lock:function(){l++},release:function(){l--,this.element=null,this.canvas=null}}},preparePatternFill:function(e,a,n,i){if(!e&&1==a)return n;var r=t.create("canvas"),c=r.getContext("2d"),l=1/i,h=n.width*l,s=n.height*l;return r.width=h,r.height=s,e&&(c.fillStyle=e,c.fillRect(0,0,h,s)),c.globalAlpha=a,c.drawImage(n,0,0,h,s),r},tempPBuffer:function(e,t){var a=r||i.createPBuffer(e,t),c=i.scaleFactor(a.canvas);return a.size&&a.size[0]==e&&a.size[1]==t?a.canvas.clearRect(0,0,e*c,t*c):(a.size=[e,t],a.element.width=Math.max(n,e*c),a.element.height=Math.max(n,t*c)),a.canvas.setTransform(1,0,0,1,0,0),a.canvas.beginPath(),a.lock(),a}})});}],
['5t', function (ym) {
ym.modules.define("graphics.render.base.tech",["util.defineClass","util.Storage"],function(e,t,n){var r=ym.env.browser,a="MSIE"==r.name&&r.documentMode>=11||r.isEdge||"WebKit"==r.engine||"Gecko"==r.engine,i=t(function(){this._shapes=new n},{isShapeSupported:function(e){return"undefined"!=typeof this._shapes.get(e)},createPane:function(){return!1},createShape:function(e){var t=this._shapes.get(e),n=new t.factory;return n.assignNameType(e),n},nameShapeForGeometry:function(e){var t=e.getType();switch(t){case"Circle":return"circle";case"Rectangle":return e.getMetaData().layout?"layout":"rectangle";case"LineString":return"line";case"Polygon":return e.getCoordinates().length>1&&"evenOdd"==e.getFillRule()&&!a?"polygon-holed":"polygon-filled";case"Point":return"image"}return!1},createShapeFromGeometry:function(e){return this.createShape(this.nameShapeForGeometry(e))},registerShape:function(e,t){this._shapes.add(e,{factory:t})}});e(i)});}],
['5w', function (ym) {
ym.modules.define("graphics.render.canvas.pane",["util.defineClass","graphics.render.base.pane","graphics.render.canvas.holder","graphics.render.canvas.util"],function(e,i,t,s,h){function r(){r.superclass.constructor.call(this)}i(r,t,s,{applyClipping:function(){},resize:function(){return this.changed(!0,!0),r.superclass.resize.call(this)},applySize:function(e){var i=h.scaleFactor(this.getCanvas());if(this.scaleFactor===i&&this.size.width===e.width&&this.size.height===e.height)return!1;var t=this.holder();return t.width=e.width*i,t.height=e.height*i,t.style.width=e.width+"px",t.style.height=e.height+"px",this.scaleFactor=i,this.getCanvas().setTransform(1,0,0,1,0,0),this.setFinalPosition(),this.size.width=e.width,this.size.height=e.height,!0},renderUpdated:function(){this.renderTickCounter++,ym.env.debug&&this.holder().setAttribute("xticks",this.renderTickCounter)},prepareRender:function(){var e=this.holder();this.getCanvas().clearRect(0,0,e.width,e.height)},renderInternalShape:function(e){var i=this.getCanvas(),t=e.lockCanvas(i,this.size,this.clippingOffset,this.clippingPure);t.transform(1,0,0,1,-this.clippingShiftedOffset[0],-this.clippingShiftedOffset[1]),e.render(),e.releaseCanvas(t,i)}}),e(r)});}],
['4z', function (ym) {
ym.modules.define("graphics.component.Measurer",["util.defineClass","util.debounce","util.array","util.extend"],function(t,i,e,n,s){function o(t){this._options=s({minimalCount:1,interval:1e3,frameTimelimit:60,preprocess:a},t),this.clear(),this._next=e(this._options.interval,this._flush)}function r(){return+new Date}function u(t){var i=1/0,e=0,s=t[0],o=t.length,r=0,u=this._options.preprocess,a=this._options.frameTimelimit;n.each(t,function(t){var n=u(t,s);n.value&&(i=Math.min(n.value,i),e=Math.max(n.value,e),n.value>a&&r++),s=t}),t.sort(function(t,i){return t.value-i.value});var l=t[Math.floor(o*this._options.percentile)];return{min:i,max:e,value:l.value,count:o,longFrames:r}}function a(t,i){return t.value=t.pureValue,t}i(o,{clear:function(){this._ticks=[]},destroy:function(){this.clear(),this._next.clear()},measure:function(t,i){this._ticks.push({pureValue:t||r(),more:i}),this._next()},_flush:function(){this._ticks.length>this._options.minimalCount&&this._report(u.call(this,this._ticks)),this.clear()},_report:function(t){this._options.report.call(this._options.reportContext,t,this)}}),t(o)});}],
['4I', function (ym) {
ym.modules.define("graphics.generator.clip",["graphics.Path","graphics.generator.cohenSutherland","util.math.areEqual"],function(e,r,n,t){var h=function(e,r){return r=r||[0,0],[[e[0][0]-r[0],e[0][1]-r[1]],[e[1][0]-r[0],e[1][1]-r[1]]]},i={line:function(e,i,u,a){var l=[];u&&(i=h(i,u));for(var o=0,s=e.length;o<s;o++){var f=e[o].buffer.vertexes,g=e[o].indexes,c=g.length-1;if(g.length){for(var p=0;c;++p,--c)if(f[g[p+1]]){var v=f[g[p]],d=f[g[p+1]],m=n(v,d,i);m.inside&&(m.cutLines[0]&&l.length&&l.push(0),l.push(m.from),!m.cutLines[1]&&p!=c&&f[g[p+2]]||l.push(m.to))}else a||0==l[l.length-1]||l.push(0),p++;a&&l.length&&!t(l[0],l[l.length-1],0)&&l.push(l[0])}}var y=[r.fromArray(l)];return y},polygon:function(e,r,n){r=h(r,n);for(var t,i=0;i<2;i++)t=[[0==i?r[0][0]:-(1/0),1==i?r[0][1]:-(1/0)],[0==i?r[1][0]:1/0,1==i?r[1][1]:1/0]],e=this.line(e,t,null,!0);return e}};e(i)});}],
['5;', function (ym) {
ym.modules.define("graphics.util.stroke",["util.array","graphics.Path","util.instantCache"],function(e,t,r,o){function n(e,t){if("undefined"==typeof presetStyle&&(t=d),"string"==typeof e&&(e=[e]),1==e.length&&"string"==typeof e[0]&&e[0]){var r=e[0].toLowerCase();if(r in t)return t[r];throw new Error("graphics.render.styles.stroke - не известный стиль "+r)}if(e.length)return e}function s(e,s,i){if(!e)return{};var d;if("undefined"==typeof i&&"string"==typeof e&&(d="decodeStrokeStyle_"+e+"_"+s,o.get(d)))return o.get(d);if("string"==typeof e?e={style:e.replace(/,/g," ").split(" ")}:t.isArray(e)&&(e={style:e}),!e.style)throw new Error("graphics.graphics.render.util.decodeStrokeStyle:стиль не определен");var l="offset"in e?+e.offset:null;isNaN(l)&&(l=0);var f=0;e.generator&&(f=function(t){var o,n=[],s=t.length;for(o=0;o<s;++o)n[o]=r.toArray(t[o]);for(n=e.generator(n),o=0;o<s;++o)n[o]=r.fromArray(n[o]);return n});var h=e.style?a(n(e.style,i),s):null,g="string"==typeof e.style?[e.style]:e.style,y={dash:h,originalPreset:g,offset:l,generator:f};return d&&o.add(d,y),y}function i(e,t){return t=t||1,{width:t,style:s(e)}}var a=function(e,t){for(var r=[],o=0,n=e.length;n;++o,--n){var s=e[o]*t||1;if(isNaN(s)){if(ym.env.debug)throw new Error("graphics.graphics.render.util.decodeStrokeStyle:"+e[o]+" не является числом")}else r.push(s)}return r.length?r:null},d={solid:!1,shortdash:[2,2],shortdot:[0,2],shortdashdot:[2,2,0,2],shortdashdotdot:[2,2,0,2,0,2],dot:[1,2],dash:[4,2],longdash:[8,2],dashdot:[4,2,1,2],longdashdot:[8,2,1,2],longdashdotdot:[8,2,1,2,1,2]};e({decodeStyle:s,decode:i})});}],
['5:', function (ym) {
ym.modules.define("graphics.util.image",["util.hd","util.imageLoader"],function(e,n,i){function a(e,t,o){if("string"==typeof e)i.load(n.selectValue(e),t,o);else if(e instanceof window.HTMLImageElement||e instanceof Image||e instanceof window.HTMLCanvasElement||window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D||window.ImageBitmap&&e instanceof window.ImageBitmap)t.call(o,e,!0);else if(window.SVGElement&&e instanceof SVGElement)a("data:image/svg+xml;base64,"+btoa(e.outerHTML),t,o);else if(e instanceof HTMLElement)t.call(o,e,!0);else if("object"==typeof e)i.load(n.selectValue(e),function(e,i){e.scaleRatio=n.selectRatio(this._activeFillImageHref),t.call(o,e,i)});else{if("function"!=typeof e)throw new Error("YMaps: undefined image source",e);e(function(e){return a(e,t,o)})}}e({load:a})});}],
['5r', function (ym) {
ym.modules.define("graphics.render.base.pane",["util.defineClass","util.pixelBounds","util.vector","event.Manager","Event"],function(i,t,e,s,n,h){var r=0,a=t(function(){this._holder=0,this.counterChanged=0,this.changeGeneration=0,this._shapesChanged=0,this.clippingPure=0,this.clippingRegion=0,this.isVisible=1,this.shapes=[],this.renderTickCounter=0,this._addMarginOffsets=1,this._resizeToClipRegion=1,this._lockedToMBR=0,this.cache={},this.size={width:0,height:0},this.viewportSize={width:0,height:0},this._onRenderEnd=[],this.clippingOffset=[0,0],this.clippingShiftedOffset=[0,0],this.lastValidClippingRegion=[[0,0],[0,0]],this.events=new n,this._ID=r++,this._zOrder=-1,this.isUnderControl=!1},{getID:function(){return this._ID},setZIndex:function(i){this._zIndex!=i&&(this._zIndex=i,this.events.fire("orderChange",new h))},getZIndex:function(){return this._zIndex},setViewportSize:function(i){this.viewportSize.width=i.width,this.viewportSize.height=i.height},setOrder:function(i){this._zOrder!=i&&(this._zOrder=i,this.events.fire("orderChange",new h))},getOrder:function(){return this._zOrder},addShape:function(i){var t=i.getPane();t!==this&&(t&&t.removeShape(i),this.shapes.push(i),i.setPane(this),this.changed(i))},removeShape:function(i){this.changed(i);for(var t=0;t<this.shapes.length;t++)if(this.shapes[t]==i)return this.shapes[t].setPane(null),this.shapes.splice(t,1),!0;return!1},removeAll:function(i){this.changed(i);for(var t=0;t<this.shapes.length;t++)this.shapes[t].setPane(null);this.shapes=[]},changed:function(i,t){i&&(this._shapesChanged++,i!==!0&&this.changeGeneration++),t||(this.counterChanged++,this.isVisible=1)},isChanged:function(){return this.counterChanged>0},shift:function(){var i=this.getBounds(),t=[-i[0][0],-i[0][1]],e=this.clippingOffset,s=[t[0],t[1]];if(this._shapesChanged||!this.shapesShift||this.shapesShift[0]!=s[0]||this.shapesShift[0]!=s[0]){this.shapesShift=s,this._shapesChanged++;for(var n=0;n<this.shapes.length;n++)this.shapes[n].shift(s)}this.clippingShiftedOffset=[e[0],e[1]]},calculateLockRegion:function(i,t){var s=i.getBounds(),n=t?this.clippingShiftedOffset:this.clippingOffset,h=t?this.shapesShift:this.margin?[-this.margin.left,-this.margin.top]:[0,0],r=[[s[0][0]+h[0],s[0][1]+h[1]],[s[1][0]+h[0],s[1][1]+h[1]]],a=this.size,p=[[n[0],n[1]],[n[0]+a.width,n[1]+a.height]],o=e.getIntersection(r,p);return o?o:[[n[0],n[1]],[n[0],n[1]]]},resize:function(){var i=this.getBounds();this.margin={left:i[0][0],top:i[0][1],width:i[1][0]-i[0][0],height:i[1][1]-i[0][1]},this.clippingPure?this.clippingRegion=[this.clippingPure[0][0]-this.margin.left,this.clippingPure[0][1]-this.margin.top,this.clippingPure[1][0]-this.margin.left,this.clippingPure[1][1]-this.margin.top]:this.clippingRegion=[0,0,this.margin.width,this.margin.height],this._isClipped=this.clippingRegion[2]<this.margin.width||this.clippingRegion[3]<this.margin.height;var t=this.getClippedSizes({width:Math.ceil(Math.max(0,Math.min(this.clippingRegion[2],this.margin.width))),height:Math.ceil(Math.max(0,Math.min(this.clippingRegion[3],this.margin.height)))});return this.applySize(t)},applySize:function(i){throw new Error("Abstract method is not implemented")},isClipped:function(){return this._isClipped},lockBoundsTo:function(i){this._lockedToMBR=i,this.changed()},setClippingRegion:function(i,t,s){i?this.clippingPure=e.clone(i):(this.clippingPure||(t=!0),this.clippingPure=null),s||this.changed(null,t)},getClippingRegion:function(){return this.clippingPure},updateClipping:function(i,t,n){if(!i)return this.setClippingRegion();var h=this.getBounds(),r=this.clippingPure||[[0,0],[0,0]],a=i,p=e.containsBounds(r,h),o=e.containsBounds(a,h),g=e.areIntersecting(r,h),c=e.areIntersecting(a,h);this.isVisible=c;var l=!g&&!c||p&&o;if(this.setClippingRegion(i,!0,l),!l){if(n&&0==s.length2(s.sub(e.getSize(r),e.getSize(a)))){var d=s.sub(this.lastValidClippingRegion[0],a[0]);if(!(Math.abs(d[0])>n||Math.abs(d[1])>n))return;this.lastValidClippingRegion=e.clone(i)}this.changed()}},getClippedSizes:function(i){if(this._resizeToClipRegion){var t,e=this.clippingRegion;return this.clippingOffset=[Math.max(0,e[0]),Math.max(0,e[1])],t={width:Math.max(0,Math.ceil(i.width-this.clippingOffset[0])),height:Math.max(0,Math.ceil(i.height-this.clippingOffset[1]))}}return this.clippingOffset=[0,0],i},setFinalPosition:function(){this.isUnderControl||this._holder.setFinalPosition(this._addMarginOffsets)},setPositionPolicy:function(i,t){this._addMarginOffsets=i,this.isUnderControl=t},render:function(){if(!this.isVisible)return void(this.margin=null);if(this.resize(),0===this.size.width||0===this.size.height)return void(this.isVisible=0);this.shift(),this._shapesChanged&&(this.prepareRender(),this._renderShapes(this.shapes),this._shapesChanged=0);for(var i=0;i<this._onRenderEnd.length;i++)this._onRenderEnd[i]();this._finishShapes()},onRenderEnd:function(i){this._onRenderEnd.push(i)},_renderShapes:function(i){for(var t=0;t<i.length;t++){var e=i[t].getBounds();(!this.clippingPure||e[1][0]>this.clippingPure[0][0]&&e[0][0]<this.clippingPure[1][0]&&e[1][1]>this.clippingPure[0][1]&&e[0][1]<this.clippingPure[1][1])&&this.renderInternalShape(i[t])}},prepareRender:function(){},renderInternalShape:function(i){i.render()},_finishShapes:function(){this.counterChanged=0;for(var i=0;i<this.shapes.length;i++)this.shapes[i].finish()},each:function(i,t){this.counterChanged=0;for(var e=0;e<this.shapes.length;e++)i.call(t,this.shapes[e])},flush:function(){this.isChanged()&&this.render()},getBounds:function(){if(this._lockedToMBR)return this._lockedToMBR;if(this.cache.Bounds&&this.cache.Bounds.seq==this.changeGeneration)return this.cache.Bounds.data;if(0===this.shapes.length)return[[0,0],[0,0]];var i=this.shapes.map(function(i){return e.clone(i.getBounds())}),t=e.fromBounds(i);return this.cache.Bounds={seq:this.changeGeneration,data:t},t},beforeAttach:function(i){},afterAttach:function(i){}});i(a)});}],
['5v', function (ym) {
ym.modules.define("graphics.render.canvas.holder",["graphics.render.base.holder","util.dom.element","util.extend"],function(e,t,n,a){e(a({},t,{createHolder:function(){return n.create({tagName:"canvas",css:{position:"absolute"}})},getCanvas:function(){return this._canvas||(this._canvas=this.holder().getContext("2d")),this._canvas}}))});}],
['5T', function (ym) {
ym.modules.define("graphics.render.svg.pane",["util.defineClass","graphics.render.base.pane","graphics.render.svg.holder"],function(t,e,i,s){function r(){r.superclass.constructor.call(this)}if(e(r,i,s,{getDefs:function(){return this._defs||(this._defs=this.createElement("defs"),this.holder().appendChild(this._defs)),this._defs},applySize:function(t){if(this.size.width===t.width&&this.size.height===t.height)return!1;var e=this.holder();return e.width=t.width,e.height=t.height,e.style.width=t.width+"px",e.style.height=t.height+"px",this.size.width=t.width,this.size.height=t.height,!0},shift:function(){r.superclass.shift.call(this),this.setFinalPosition(),this.getCanvas().setAttribute("transform","translate("+-this.clippingShiftedOffset[0]+" "+-this.clippingShiftedOffset[1]+")")},renderUpdated:function(){this.renderTickCounter++,ym.env.debug&&this.holder().setAttribute("xticks",this.renderTickCounter)},render:function(){var t=+new Date;r.superclass.render.call(this),ym.env.debug&&(this.holder().setAttribute("xvisible",this.isVisible),this.holder().setAttribute("xRenTime",+new Date-t)),this.holder().style.display=this.isVisible?"":"none"}}),ym.env.server.params.csp&&"Gecko"===ym.env.browser.engine&&parseFloat(ym.env.browser.version)>=45){var h=function(t,e,i){t.matches(e)&&i(t);for(var s=t.querySelectorAll(e),r=0;r<s.length;r++)i(s[r])};r.prototype.beforeAttach=function(t){h(t,"[style]",function(t){t.setAttribute("data-style",t.style.cssText),t.removeAttribute("style")})},r.prototype.afterAttach=function(t){h(t,"[data-style]",function(t){t.style.cssText=t.getAttribute("data-style"),t.removeAttribute("data-style")})}}t(r)});}],
['5a', function (ym) {
ym.modules.define("graphics.generator.cohenSutherland",[],function(n){function r(n,r){var e=0;return n[0]<r[0][0]?e=1|e:n[0]>r[1][0]&&(e=2|e),n[1]<r[0][1]?e=4|e:n[1]>r[1][1]&&(e=8|e),e}var e=function(n,e,i){for(var o=n[0],t=e[0],u=n[1],a=e[1],c=r(n,i),f=r(e,i),d=i[0],s=i[1],v=d[0],g=d[1],h=s[0],l=s[1],m=0==(c|f),p=0!=(c&f),y=!(m||p),L=0,S=[0,0];!m&&!p;){if(0==c){L=L?0:1;var b;b=o,o=t,t=b,b=u,u=a,a=b,b=c,c=f,f=b,S[L]=!0}0!=(1&c)?(u+=(a-u)*(v-o)/(t-o),o=v):0!=(2&c)?(u+=(a-u)*(h-o)/(t-o),o=h):0!=(4&c)?(o+=(t-o)*(g-u)/(a-u),u=g):0!=(8&c)&&(o+=(t-o)*(l-u)/(a-u),u=l),c=r([o,u],i),m=0==(c|f),p=0!=(c&f)}return{inside:m,outside:p,clipping:y,cutLines:S,to:[L?o:t,L?u:a],from:[L?t:o,L?a:u]}};n(e)});}],
['5p', function (ym) {
ym.modules.define("graphics.render.base.holder",["util.dom.element","util.dom.style"],function(e,t,i){e({createHolder:function(){return t.create({tagName:"div",css:{position:"absolute"}})},holder:function(){return this._holder||(this._holder=this.createHolder()),this._holder},setFinalPosition:function(e){i.setPosition(this.holder(),[(e?this.margin.left:0)+this.clippingOffset[0],(e?this.margin.top:0)+this.clippingOffset[1]])}})});}],
['5S', function (ym) {
ym.modules.define("graphics.render.svg.holder",["graphics.render.base.holder","util.dom.element","util.extend"],function(e,a,t,n){var r="http://www.w3.org/2000/svg";e(n({},a,{createHolder:function(){return t.create({tagName:"svg",namespace:r,css:{position:"absolute",willChange:"transform",transform:"translateZ(0)"}})},getCanvas:function(){return this._canvas||(this._canvas=t.create({tagName:"g",namespace:r,parentNode:this.holder()})),this._canvas},SVG_NAMESPACE:r,createElement:function(e){return t.create({tagName:e,namespace:r})}}))});}]
]
);